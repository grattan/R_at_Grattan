<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>8 Different data types | Using R at Grattan Institute</title>
<meta name="author" content="Matt Cowgill, Will Mackey, and James Ha">
<meta name="description" content="Data comes in many different forms. This chapter explores some of these forms and provides some tools to deal with them. It’s useful to make a distinction between data structures and data types....">
<meta name="generator" content="bookdown 0.23.1 with bs4_book()">
<meta property="og:title" content="8 Different data types | Using R at Grattan Institute">
<meta property="og:type" content="book">
<meta property="og:description" content="Data comes in many different forms. This chapter explores some of these forms and provides some tools to deal with them. It’s useful to make a distinction between data structures and data types....">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="8 Different data types | Using R at Grattan Institute">
<meta name="twitter:description" content="Data comes in many different forms. This chapter explores some of these forms and provides some tools to deal with them. It’s useful to make a distinction between data structures and data types....">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.10/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Roboto-0.4.0/font.css" rel="stylesheet">
<link href="libs/_Roboto%20Mono-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Using R at Grattan Institute</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome!</a></li>
<li class="book-part">Part I: Why and how we use R at Grattan</li>
<li><a class="" href="what-is-r-and-what-is-r-studio-and-why-are-we-doing-all-of-this.html"><span class="header-section-number">1</span> What is R and what is R Studio and why are we doing all of this</a></li>
<li><a class="" href="getting-started.html"><span class="header-section-number">2</span> Getting started</a></li>
<li><a class="" href="organising-projects.html"><span class="header-section-number">3</span> Organising an R project at Grattan</a></li>
<li><a class="" href="coding-style.html"><span class="header-section-number">4</span> Grattan’s coding style and the tidyverse</a></li>
<li><a class="" href="packages.html"><span class="header-section-number">5</span> Using packages</a></li>
<li><a class="" href="seeking-help.html"><span class="header-section-number">6</span> Seeking help and using other resources</a></li>
<li class="book-part">Part II: Loading and transforming data</li>
<li><a class="" href="reading-data.html"><span class="header-section-number">7</span> Reading data</a></li>
<li><a class="active" href="data-types.html"><span class="header-section-number">8</span> Different data types</a></li>
<li><a class="" href="data-transformation-with-dplyr.html"><span class="header-section-number">9</span> Data transformation with dplyr</a></li>
<li class="book-part">Part III: Visualising data</li>
<li><a class="" href="data-visualisation.html"><span class="header-section-number">10</span> Data Visualisation</a></li>
<li><a class="" href="chart-cookbook.html"><span class="header-section-number">11</span> Chart cookbook</a></li>
<li><a class="" href="analysis.html"><span class="header-section-number">12</span> Analysis</a></li>
<li class="book-part">Advanced topics</li>
<li><a class="" href="functional-programming-making-and-using-your-own-functions.html"><span class="header-section-number">13</span> Functional programming: making and using your own functions</a></li>
<li><a class="" href="version-control.html"><span class="header-section-number">14</span> Version control</a></li>
<li><a class="" href="contributing-to-this-book.html"><span class="header-section-number">15</span> Contributing to this book</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="data-types" class="section level1" number="8">
<h1>
<span class="header-section-number">8</span> Different data types<a class="anchor" aria-label="anchor" href="#data-types"><i class="fas fa-link"></i></a>
</h1>
<p>Data comes in many different forms. This chapter explores some of these forms and provides some tools to deal with them.</p>
<p>It’s useful to make a distinction between data <strong>structures</strong> and data <strong>types</strong>. This is a simplification but is all we need to think about for now.</p>
<p><strong>Data structures</strong> are the objects that hold your data. A <code>vector</code> stores elements in one dimension. A <code>data.frame</code> (or <code>tibble</code><a href="contributing-to-this-book.html#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a>) combines vectors of the same length into two dimensions with rows and columns. A <code>list</code> can store data in any way you like.</p>
<p>For our work at Grattan, tidy data within <code>tibbles</code> – where each row is an observation, and each column is a variable – is usually preferred.</p>
<p>By picking a common structure for our data, we are able to transform, plot and analyse it using a common set of functions. We don’t need to move from one method to another depending our what our data looks like.</p>
<p>Each <code>tibble</code> is a collection of <code>vectors</code> of the same length. And each <code>vector</code> must have a single data <strong>type</strong>.</p>
<p>The key data types we use are:</p>
<ul>
<li>Numerics (numbers) with the sub-types of doubles and integers.</li>
<li>Characters, also known as strings, to deal with text variables.</li>
<li>Factors, a stricter type for characters to use with categorical variables.</li>
<li>Dates, which are notoriously hard to deal with in statistical software.</li>
</ul>
<p>The following sections will walk you through these data types and how to best handle them. We’ll first load the required packages and read in some data.</p>
<div id="set-up-and-packages-1" class="section level2" number="8.1">
<h2>
<span class="header-section-number">8.1</span> Set-up and packages<a class="anchor" aria-label="anchor" href="#set-up-and-packages-1"><i class="fas fa-link"></i></a>
</h2>
<p>This chapter uses packages that are designed to help with different data types.</p>
<p>The <code>stringr</code> package helps deal with characters. The <code>forcats</code> package helps with factors. The <code>lubridate</code> package helps – a lot! – with dates.</p>
<p>These three packages are <em>installed</em> part of the <code>tidyverse</code> and are installed with it. <code>stringr</code> and <code>forcats</code> are <em>loaded</em> with <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code>, but <code>lubridate</code> isn’t and needs to be loaded separately.</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org">lubridate</a></span><span class="op">)</span></code></pre></div>
<p>For most charts in this chapter, we’ll use the <code>sa3_income</code> data summarised below.<a href="contributing-to-this-book.html#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a> It is a tidy dataset containing the median income and number of workers by SA3, occupation and gender between 2010 and 2015:</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sa3_income</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/sa3_income.csv"</span><span class="op">)</span>

<span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">sa3_income</span><span class="op">)</span></code></pre></div>
<pre><code>## Rows: 47,899
## Columns: 16
## $ sa3                   &lt;dbl&gt; 10102, 10102, 10102, 10102, 10102, 10102, 10102,…
## $ sa3_name              &lt;chr&gt; "Queanbeyan", "Queanbeyan", "Queanbeyan", "Quean…
## $ sa3_sqkm              &lt;dbl&gt; 6511.191, 6511.191, 6511.191, 6511.191, 6511.191…
## $ sa3_income_percentile &lt;dbl&gt; 80, 76, 78, 76, 74, 79, 80, 76, 78, 76, 74, 79, …
## $ sa4_name              &lt;chr&gt; "Capital Region", "Capital Region", "Capital Reg…
## $ gcc_name              &lt;chr&gt; "Rest of NSW", "Rest of NSW", "Rest of NSW", "Re…
## $ state                 &lt;chr&gt; "NSW", "NSW", "NSW", "NSW", "NSW", "NSW", "NSW",…
## $ occupation            &lt;chr&gt; "Clerical and Administrative Workers", "Clerical…
## $ occ_short             &lt;chr&gt; "Admin", "Admin", "Admin", "Admin", "Admin", "Ad…
## $ prof                  &lt;chr&gt; "Non-professional", "Non-professional", "Non-pro…
## $ gender                &lt;chr&gt; "Women", "Women", "Women", "Women", "Women", "Wo…
## $ year                  &lt;dbl&gt; 2011, 2012, 2013, 2014, 2015, 2016, 2011, 2012, …
## $ median_income         &lt;dbl&gt; 52127, 54894, 57868, 59025, 59041, 62741, 66900,…
## $ average_income        &lt;dbl&gt; 51306, 53807, 56405, 57742, 58286, 61591, 66869,…
## $ total_income          &lt;dbl&gt; 235853682, 253323356, 266908460, 264054166, 2382…
## $ workers               &lt;dbl&gt; 4597, 4708, 4732, 4573, 4087, 4448, 1459, 1467, …</code></pre>
</div>
<div id="why-data-types-matter" class="section level2" number="8.2">
<h2>
<span class="header-section-number">8.2</span> Why data types matter<a class="anchor" aria-label="anchor" href="#why-data-types-matter"><i class="fas fa-link"></i></a>
</h2>
<p>Data ‘types’ define how your data is stored and what you can (or cannot) do with it.</p>
<p>You can do maths on numbers:</p>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">num1</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="va">num2</span> <span class="op">&lt;-</span> <span class="fl">5</span>

<span class="va">num1</span> <span class="op">+</span> <span class="va">num2</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">num1</span> <span class="op">/</span> <span class="va">num2</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>And you can perform string operations on characters:</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">char1</span> <span class="op">&lt;-</span> <span class="st">"Hello"</span>

<span class="fu"><a href="https://rdrr.io/r/base/substr.html">substring</a></span><span class="op">(</span><span class="va">char1</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "lo"</code></pre>
<p>But you can’t perform maths on characters, because that doesn’t really make sense:</p>
<div class="sourceCode" id="cb124"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">"Hello"</span> <span class="op">*</span> <span class="fl">2</span> </code></pre></div>
<pre><code>## Error in "Hello" * 2: non-numeric argument to binary operator</code></pre>
<p>Even when you kind of think it should:</p>
<div class="sourceCode" id="cb126"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">"100"</span> <span class="op">*</span> <span class="fl">2</span></code></pre></div>
<pre><code>## Error in "100" * 2: non-numeric argument to binary operator</code></pre>
<p>Above, R is trying to multiply the <em>character</em> <code>"100"</code> by the <em>number</em> <code>2</code>. Which – because of the types of these data – makes as much sense as <code>"Hello"</code> <span class="math inline">\(\times\)</span> <code>2</code>.</p>
<p>Defining and checking and being aware of the ‘type’ of your data is a boring and tedious task common to all statistical languages/software.
It’s just something you need to do.</p>
<p>But knowing this information will save you countless errors, like the ones above, in the future.
We’ll get through it briefly, focussing on the things you need to know and on how to solve the problems you are likely to encounter.</p>
</div>
<div id="checking-and-changing-data-types" class="section level2" number="8.3">
<h2>
<span class="header-section-number">8.3</span> Checking and changing data types<a class="anchor" aria-label="anchor" href="#checking-and-changing-data-types"><i class="fas fa-link"></i></a>
</h2>
<p>You can use the <code>str</code> function to check the type of an object:</p>
<div class="sourceCode" id="cb128"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ob1</span> <span class="op">&lt;-</span> <span class="st">"Hello"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ob1</span><span class="op">)</span></code></pre></div>
<pre><code>##  chr "Hello"</code></pre>
<div class="sourceCode" id="cb130"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ob2</span> <span class="op">&lt;-</span> <span class="fl">10</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ob2</span><span class="op">)</span></code></pre></div>
<pre><code>##  num 10</code></pre>
<div class="sourceCode" id="cb132"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ob3</span> <span class="op">&lt;-</span> <span class="st">"10"</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ob3</span><span class="op">)</span></code></pre></div>
<pre><code>##  chr "10"</code></pre>
<p>You can also change or assert the data type explicitly:</p>
<div class="sourceCode" id="cb134"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ob4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="st">"10"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ob4</span><span class="op">)</span></code></pre></div>
<pre><code>##  num 10</code></pre>
<div class="sourceCode" id="cb136"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ob5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">ob5</span><span class="op">)</span></code></pre></div>
<pre><code>##  chr "10"</code></pre>
<p>But be cautious: forcing data from one type to another can lead to <code>NA</code> values when the conversion isn’t possible. For example:</p>
<div class="sourceCode" id="cb138"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ob6</span> <span class="op">&lt;-</span> <span class="st">"Hello"</span>
<span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">ob6</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>## [1] NA</code></pre>
<p>The characters “Hello” can’t be converted to a number, so R replaces it with <code>NA</code> and throws you a warning message.</p>
<p>The next section extends these concepts from single elements to whole variables in your data.</p>
</div>
<div id="checking-and-changing-data-types-in-vectors-and-tibbles" class="section level2" number="8.4">
<h2>
<span class="header-section-number">8.4</span> Checking and changing data types in vectors and <code>tibbles</code><a class="anchor" aria-label="anchor" href="#checking-and-changing-data-types-in-vectors-and-tibbles"><i class="fas fa-link"></i></a>
</h2>
<p>In a <code>tibble</code>, each variable is a vector that can have <em>one-and-only-one</em> data type.</p>
<p>A variable can be a numeric, or character, or factor, or date, or something else entirely.
But it can only be of one type.<a href="contributing-to-this-book.html#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a>
This means that every observation in a variable must be of the same type.</p>
<p>Below is an example <code>tibble</code> to explore how we can check, change and use different data types.
This <code>tibble</code> is constructed by defining four vectors:</p>
<div class="sourceCode" id="cb141"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Kate"</span>, <span class="st">"Jonathan"</span>, <span class="st">"Emily"</span>, <span class="st">"James"</span><span class="op">)</span>,
  numb1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span><span class="op">)</span>,
  numb2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"-10"</span>, <span class="st">"10"</span>, <span class="st">"-20"</span>, <span class="st">"20"</span><span class="op">)</span>,
  numb3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">1000</span>, <span class="fl">10000</span>, <span class="st">"None"</span><span class="op">)</span>,
  messy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1"</span>, <span class="st">"  1  "</span>, <span class="st">"0. 1"</span>, <span class="st">"1%"</span><span class="op">)</span>
<span class="op">)</span>

<span class="va">eg</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   name     numb1 numb2 numb3 messy  
##   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  
## 1 Kate         1 -10   100   "1"    
## 2 Jonathan     2 10    1000  "  1  "
## 3 Emily        3 -20   10000 "0. 1" 
## 4 James        4 20    None  "1%"</code></pre>
<p>The first two variables are easy.
<code>name</code> contains only strings and so is set to a character variable.
<code>numb1</code> contains numbers is set to a double.</p>
<p>The <code>numb2</code> and <code>messy</code> variables are also all strings, so R will store them as character variables (even if a human <em>may</em> be able to decipher some of the strings as numbers),</p>
<p><code>numb3</code> contains <strong>both</strong> numbers and strings. When this is the case, R converts everything to a character to preserve all the information.</p>
<p>We can check the types of the variables in the <code>eg</code> dataset with the <code>str</code> function:</p>
<div class="sourceCode" id="cb143"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="va">eg</span><span class="op">)</span></code></pre></div>
<pre><code>## tibble [4 × 5] (S3: tbl_df/tbl/data.frame)
##  $ name : chr [1:4] "Kate" "Jonathan" "Emily" "James"
##  $ numb1: num [1:4] 1 2 3 4
##  $ numb2: chr [1:4] "-10" "10" "-20" "20"
##  $ numb3: chr [1:4] "100" "1000" "10000" "None"
##  $ messy: chr [1:4] "1" "  1  " "0. 1" "1%"</code></pre>
<p>This tells us that our data <strong>structure</strong> is <code>tbl_df</code>, <code>tbl</code> and <code>data.frame</code> (i.e. a <code>tibble</code>), and the data <strong>types</strong> of our variables are: character, numeric, character, character and character.</p>
<p>The first two variables are classified as we want them. <code>names</code> should be stored as characters; <code>numb1</code> should be stored as doubles.</p>
<p>But we can see that <code>numb2</code> is a set of numbers that have been stored as characters. And this means we can’t use their wonderful numeric powers:</p>
<div class="sourceCode" id="cb145"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb2_div10 <span class="op">=</span> <span class="va">numb2</span> <span class="op">/</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<pre><code>## Error: Problem with `mutate()` column `numb2_div10`.
## ℹ `numb2_div10 = numb2/10`.
## ✖ non-numeric argument to binary operator</code></pre>
<p>If we want to change that, we redefine the <code>numb2</code> variable using the <code>mutate</code> function (from the previous chapter) and the <code>as.numeric</code> function described in the previous section:</p>
<div class="sourceCode" id="cb147"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">numb2</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   name     numb1 numb2 numb3 messy  
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  
## 1 Kate         1   -10 100   "1"    
## 2 Jonathan     2    10 1000  "  1  "
## 3 Emily        3   -20 10000 "0. 1" 
## 4 James        4    20 None  "1%"</code></pre>
<p>The <code>tibble</code> output shows that <code>numb2</code> is now a double. Yay! And this means we can do maths on it:</p>
<div class="sourceCode" id="cb149"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">numb2</span><span class="op">)</span>,
         numb2_div10 <span class="op">=</span> <span class="va">numb2</span> <span class="op">/</span> <span class="fl">10</span><span class="op">)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 6
##   name     numb1 numb2 numb3 messy   numb2_div10
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;
## 1 Kate         1   -10 100   "1"              -1
## 2 Jonathan     2    10 1000  "  1  "           1
## 3 Emily        3   -20 10000 "0. 1"           -2
## 4 James        4    20 None  "1%"              2</code></pre>
<p>What about <code>numb3</code>? It has a numbers and a string that are stored as a character variable. If we use the same approach as above:</p>
<div class="sourceCode" id="cb151"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>numb3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">numb3</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in mask$eval_all_mutate(quo): NAs introduced by coercion</code></pre>
<pre><code>## # A tibble: 4 × 5
##   name     numb1 numb2 numb3 messy  
##   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;  
## 1 Kate         1 -10     100 "1"    
## 2 Jonathan     2 10     1000 "  1  "
## 3 Emily        3 -20   10000 "0. 1" 
## 4 James        4 20       NA "1%"</code></pre>
<p>We do convert the <code>numb3</code> variable to a numeric, which is what we wanted. But there are casualties. Because <code>"None"</code> cannot be neatly converted to a number, the string in the last observation is removed and replaced with <code>NA</code> (and we get a warning that there were <code>NAs introduced by coercion</code>).</p>
<p>Converting strings to numerics made harder by data that is stored messily. The <code>messy</code> variable is made up of numbers that humans could decipher. The <code>as.numeric</code> function tries its best:</p>
<div class="sourceCode" id="cb154"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">eg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>messy <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span><span class="op">(</span><span class="va">messy</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>## Warning in mask$eval_all_mutate(quo): NAs introduced by coercion</code></pre>
<pre><code>## # A tibble: 4 × 5
##   name     numb1 numb2 numb3 messy
##   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;
## 1 Kate         1 -10   100       1
## 2 Jonathan     2 10    1000      1
## 3 Emily        3 -20   10000    NA
## 4 James        4 20    None     NA</code></pre>
<p>We again convert the variable to a numeric. The <code>as.numeric</code> function nails <code>"1"</code> and removes the leading and trailing white-spaces of <code>"  1  "</code>. But it doesn’t understand the space in the middle of <code>"0. 1"</code>, and doesn’t convert the percentage in <code>"1%"</code>. Luckily, we have the <code>warning</code> message that tells us this has happened.</p>
<p>Complications like these mean we have to watch out for how our data is read.</p>
</div>
<div id="asserting-data-types-when-importing-data" class="section level2" number="8.5">
<h2>
<span class="header-section-number">8.5</span> Asserting data types when importing data<a class="anchor" aria-label="anchor" href="#asserting-data-types-when-importing-data"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="changing-the-data-types-of-lots-of-variables" class="section level2" number="8.6">
<h2>
<span class="header-section-number">8.6</span> Changing the data types of lots of variables<a class="anchor" aria-label="anchor" href="#changing-the-data-types-of-lots-of-variables"><i class="fas fa-link"></i></a>
</h2>
</div>
<div id="using-character-vectors" class="section level2" number="8.7">
<h2>
<span class="header-section-number">8.7</span> Using character vectors<a class="anchor" aria-label="anchor" href="#using-character-vectors"><i class="fas fa-link"></i></a>
</h2>
<p>Characters contain information between quotes, like a letter or word or sentence. They can contain (almost) anything. They have no ‘rules’, unlike numerics, factors or dates. This freedom can be good or bad depending on your situation: sometimes restrictions are good!</p>
<div class="sourceCode" id="cb157"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="st">"hello"</span></code></pre></div>
<pre><code>## [1] "hello"</code></pre>
<div class="inline-figure"><img src="atlas/rstudio_newproject.png" width="66%" style="display: block; margin: auto;"></div>
<div class="sourceCode" id="cb159"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hello"</span>, <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/typeof.html">typeof</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<div class="sourceCode" id="cb161"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hello"</span>, <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/class.html">class</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "character"</code></pre>
<div class="sourceCode" id="cb163"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hello"</span>, <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>##  chr [1:2] "hello" "1"</code></pre>
</div>
<div id="using-dates-with-lubridate" class="section level2" number="8.8">
<h2>
<span class="header-section-number">8.8</span> Using dates with <code>lubridate::</code><a class="anchor" aria-label="anchor" href="#using-dates-with-lubridate"><i class="fas fa-link"></i></a>
</h2>
<p>Dates are hard, and dealing with dates in statistical software like R, Excel</p>
<p>The <code>lubridate::</code> package</p>
</div>
<div id="strings-with-stringr" class="section level2" number="8.9">
<h2>
<span class="header-section-number">8.9</span> Strings with <code>stringr::</code><a class="anchor" aria-label="anchor" href="#strings-with-stringr"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Replacing values</li>
<li>Matching values</li>
<li>Separating columns</li>
</ul>
</div>
<div id="factors-with-forcats" class="section level2" number="8.10">
<h2>
<span class="header-section-number">8.10</span> Factors with <code>forcats::</code><a class="anchor" aria-label="anchor" href="#factors-with-forcats"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Dangers with factors</li>
</ul>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="reading-data.html"><span class="header-section-number">7</span> Reading data</a></div>
<div class="next"><a href="data-transformation-with-dplyr.html"><span class="header-section-number">9</span> Data transformation with dplyr</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#data-types"><span class="header-section-number">8</span> Different data types</a></li>
<li><a class="nav-link" href="#set-up-and-packages-1"><span class="header-section-number">8.1</span> Set-up and packages</a></li>
<li><a class="nav-link" href="#why-data-types-matter"><span class="header-section-number">8.2</span> Why data types matter</a></li>
<li><a class="nav-link" href="#checking-and-changing-data-types"><span class="header-section-number">8.3</span> Checking and changing data types</a></li>
<li><a class="nav-link" href="#checking-and-changing-data-types-in-vectors-and-tibbles"><span class="header-section-number">8.4</span> Checking and changing data types in vectors and tibbles</a></li>
<li><a class="nav-link" href="#asserting-data-types-when-importing-data"><span class="header-section-number">8.5</span> Asserting data types when importing data</a></li>
<li><a class="nav-link" href="#changing-the-data-types-of-lots-of-variables"><span class="header-section-number">8.6</span> Changing the data types of lots of variables</a></li>
<li><a class="nav-link" href="#using-character-vectors"><span class="header-section-number">8.7</span> Using character vectors</a></li>
<li><a class="nav-link" href="#using-dates-with-lubridate"><span class="header-section-number">8.8</span> Using dates with lubridate::</a></li>
<li><a class="nav-link" href="#strings-with-stringr"><span class="header-section-number">8.9</span> Strings with stringr::</a></li>
<li><a class="nav-link" href="#factors-with-forcats"><span class="header-section-number">8.10</span> Factors with forcats::</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Using R at Grattan Institute</strong>" was written by Matt Cowgill, Will Mackey, and James Ha. It was last built on 2021-11-30.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
