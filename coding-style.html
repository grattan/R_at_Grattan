<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>4 Grattan’s coding style and the tidyverse | Using R at Grattan Institute</title>
<meta name="author" content="Matt Cowgill, Will Mackey, and James Ha">
<meta name="description" content="The benefits of a common coding style are well explained by Hadley Wickham: Good style is important because while your code only has one author, it’ll usually have multiple readers. This is...">
<meta name="generator" content="bookdown 0.24.4 with bs4_book()">
<meta property="og:title" content="4 Grattan’s coding style and the tidyverse | Using R at Grattan Institute">
<meta property="og:type" content="book">
<meta property="og:description" content="The benefits of a common coding style are well explained by Hadley Wickham: Good style is important because while your code only has one author, it’ll usually have multiple readers. This is...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="4 Grattan’s coding style and the tidyverse | Using R at Grattan Institute">
<meta name="twitter:description" content="The benefits of a common coding style are well explained by Hadley Wickham: Good style is important because while your code only has one author, it’ll usually have multiple readers. This is...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Roboto-0.4.0/font.css" rel="stylesheet">
<link href="libs/_Roboto%20Mono-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS -->
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Using R at Grattan Institute</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Welcome!</a></li>
<li class="book-part">Part I: Why and how we use R at Grattan</li>
<li><a class="" href="what-is-r-and-what-is-r-studio-and-why-are-we-doing-all-of-this.html"><span class="header-section-number">1</span> What is R and what is R Studio and why are we doing all of this</a></li>
<li><a class="" href="getting-started.html"><span class="header-section-number">2</span> Getting started</a></li>
<li><a class="" href="organising-projects.html"><span class="header-section-number">3</span> Organising an R project at Grattan</a></li>
<li><a class="active" href="coding-style.html"><span class="header-section-number">4</span> Grattan’s coding style and the tidyverse</a></li>
<li><a class="" href="packages.html"><span class="header-section-number">5</span> Using packages</a></li>
<li><a class="" href="seeking-help.html"><span class="header-section-number">6</span> Seeking help and using other resources</a></li>
<li class="book-part">Part II: Loading and transforming data</li>
<li><a class="" href="reading-data.html"><span class="header-section-number">7</span> Reading data</a></li>
<li><a class="" href="data-types.html"><span class="header-section-number">8</span> Different data types</a></li>
<li><a class="" href="data-transformation-with-dplyr.html"><span class="header-section-number">9</span> Data transformation with dplyr</a></li>
<li class="book-part">Part III: Visualising data</li>
<li><a class="" href="data-visualisation.html"><span class="header-section-number">10</span> Data Visualisation</a></li>
<li><a class="" href="chart-cookbook.html"><span class="header-section-number">11</span> Chart cookbook</a></li>
<li><a class="" href="analysis.html"><span class="header-section-number">12</span> Analysis</a></li>
<li class="book-part">Advanced topics</li>
<li><a class="" href="functional-programming-making-and-using-your-own-functions.html"><span class="header-section-number">13</span> Functional programming: making and using your own functions</a></li>
<li><a class="" href="version-control.html"><span class="header-section-number">14</span> Version control</a></li>
<li><a class="" href="contributing-to-this-book.html"><span class="header-section-number">15</span> Contributing to this book</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="coding-style" class="section level1" number="4">
<h1>
<span class="header-section-number">4</span> Grattan’s coding style and the <code>tidyverse</code><a class="anchor" aria-label="anchor" href="#coding-style"><i class="fas fa-link"></i></a>
</h1>
<p>The benefits of a common coding style are well explained <a href="http://r-pkgs.had.co.nz/style.html">by Hadley Wickham</a>:</p>
<blockquote>
<p>Good style is important because while your code only has one author, it’ll usually have multiple readers. This is especially true when you’re writing code with others. In that case, it’s a good idea to agree on a common style up-front.</p>
</blockquote>
<p>Below we describe the <strong>key</strong> elements of Grattan coding style, without being too tedious about it all. There are many elements of coding style we don’t cover in this guide; if you’re unsure about anything, <a href="https://style.tidyverse.org/">consult the <code>tidyverse</code> guide</a>.</p>
<p>You should also see the <a href="organising-projects.html#organising-projects">Using R at Grattan</a> page for guidelines about setting up your project.</p>
<p>A core principle for coding at Grattan is that your code should be <strong>readable by humans</strong>. For this reason, we prefer to use the <code>tidyverse</code> set of packages for data reading, manipulation and visualisation.</p>
<div id="tidyverse" class="section level2" number="4.1">
<h2>
<span class="header-section-number">4.1</span> The <code>tidyverse</code><a class="anchor" aria-label="anchor" href="#tidyverse"><i class="fas fa-link"></i></a>
</h2>
<div class="inline-figure">
<img src="atlas/tidyverse.png"><!-- -->
</div>
<p>The <code>tidyverse</code> is central to our work at Grattan. The <code>tidyverse</code> is a <a href="https://www.tidyverse.org/packages/">collection of related R packages</a> for importing, wrangling, exploring and visualising data in R. The packages are designed to work well together.</p>
<div id="why-do-we-use-the-tidyverse" class="section level3" number="4.1.1">
<h3>
<span class="header-section-number">4.1.1</span> Why do we use the tidyverse?<a class="anchor" aria-label="anchor" href="#why-do-we-use-the-tidyverse"><i class="fas fa-link"></i></a>
</h3>
<p>The <code>tidyverse</code> makes life easier!</p>
<p>The core <code>tidyverse</code> packages, like <code>ggplot2</code>, <code>dplyr</code>, and <code>tidyr</code>, are extremely popular. The <code>tidyverse</code> is probably the most popular ‘dialect’ of R. This means that any problem you encounter with the <code>tidyverse</code> will have been encountered many times before by other R users, so a solution will only be a Google search away.</p>
<p>The <code>tidyverse</code> packages are all designed to work well together, with a consistent underlying philosophy and design. This means that coding habits you learn with one <code>tidyverse</code> package, like <code>dplyr</code>, are also applicable to other packages, like <code>tidyr</code>.</p>
<p>They’re designed to work with data frames<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;The tidyverse works with ‘tibbles’, which are a tidyverse-specific variant of the data frame. Don’t worry about the difference between tibbles and data frames.&lt;/p&gt;"><sup>17</sup></a>, a rectangular data object that will be familiar to spreadsheet users that is very intuitive and convenient for the sort of work we do at Grattan. In particular, the <code>tidyverse</code> is built around the concept of <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html"><em>tidy data</em></a>, which has a specific meaning in this context that we’ll come to later. The fact that <code>tidyverse</code> packages are all built around one type of data object makes them easier to work with.</p>
<p>The creator of the <code>tidyverse</code>, Hadley Wickham, places great value on code that is expressive and comprehensible to humans. This means that code written in the <code>tidyverse</code> idiom is often able to be understood even if you haven’t encountered the functions before. For example, look at this chunk of code:</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">my_data</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">30</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">mutate</span><span class="op">(</span>relative_income <span class="op">=</span> <span class="va">income</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">income</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Without knowing what <code>my_data</code> looks like, and even if you haven’t encountered these functions before, this should be reasonably intuitive. We’re taking some data, and then<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content="&lt;p&gt;you can read the pipe, &lt;code&gt;%&amp;gt;%&lt;/code&gt;, as ‘and then’&lt;/p&gt;"><sup>18</sup></a> only keeping observations that relate to people aged 30 and older, then calculating a new variable, <code>relative_income</code>. The name of a <code>tidyverse</code> function - like <code>filter</code>, <code>group_by</code>, <code>summarise</code>, and so on - generally gives you a pretty good idea what the function is going to do with your data, which isn’t always the case with other approaches.</p>
<p>Here’s one way to do the same thing in base R:</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/transform.html">transform</a></span><span class="op">(</span><span class="va">my_data</span><span class="op">[</span><span class="va">my_data</span><span class="op">$</span><span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">30</span>, <span class="op">]</span>,
          relative_income <span class="op">=</span> <span class="va">income</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">income</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>The base R code gets the job done, but it’s clunkier, less expressive, and harder to read. A core principle of coding at Grattan is that you should strive to make your work <strong>human readable</strong>.</p>
<p>Code written with <code>tidyverse</code> functions is often faster than its base R equivalents. But most of our work at Grattan is with small-to-medium sized datasets (with fewer than a million rows or so), so speed isn’t usually a major concern anyway.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;When working with very large datasets, it might be worth gaining speed using other packages, such as &lt;a href="https://cran.r-project.org/web/packages/data.table/vignettes/datatable-intro.html"&gt;&lt;code&gt;data.table&lt;/code&gt;&lt;/a&gt;. Fortunately, using the &lt;code&gt;dtplyr&lt;/code&gt; package you can get most of the speed benefits of &lt;code&gt;data.table&lt;/code&gt; and stick to familiar &lt;code&gt;dplyr&lt;/code&gt; syntax.&lt;/p&gt;'><sup>19</sup></a></p>
<p>The most valuable resource we deal with at Grattan is our time. Computers are cheap, people are not. If your code executes quickly, but it takes your colleague many hours to decipher it, the cost of the extra QC time more than outweighs the saving through faster computation. The <code>tidyverse</code> packages strike a balance between expressive, comprehensible code and computational efficiency that suits the nature of our work at Grattan. This balance is the right one for most of our work, most of the time.</p>
<p>Most R scripts at Grattan should start with <code><a href="https://tidyverse.tidyverse.org">library(tidyverse)</a></code>. Most of your work will be in data frames, and most of the time the <code>tidyverse</code> contains the core tools you’ll need to do that work.</p>
</div>
</div>
<div id="load-packages-first" class="section level2" number="4.2">
<h2>
<span class="header-section-number">4.2</span> Load packages first<a class="anchor" aria-label="anchor" href="#load-packages-first"><i class="fas fa-link"></i></a>
</h2>
<p>Our analysis scripts will almost always involve loading some <a href="packages.html#packages">packages</a>. These should be laoded at the top of a script, in one block like this:</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">grattantheme</span><span class="op">)</span></code></pre></div>
<p>If you’re loading a package from Github, it’s a good idea to leave a <a href="coding-style.html#use-comments">comment</a> to say where it came from, like this:</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">grattantheme</span><span class="op">)</span> <span class="co"># remotes::install_github("grattan/grattantheme")</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">strayr</span><span class="op">)</span> <span class="co"># remotes::install_github("runapp-aus/strayr")</span></code></pre></div>
<p>Don’t scatter <code><a href="https://rdrr.io/r/base/library.html">library()</a></code> calls throughout your script - put them all at the top.</p>
<p>The only thing that should come before loading your packages is the script preamble.</p>
</div>
<div id="script-preamble" class="section level2" number="4.3">
<h2>
<span class="header-section-number">4.3</span> Script preamble<a class="anchor" aria-label="anchor" href="#script-preamble"><i class="fas fa-link"></i></a>
</h2>
<p>Describe what your script does in the first few lines using comments or within an RMarkdown document.</p>
<p><strong>Good</strong></p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># This script reads ABS data downloaded from TableBuilder and combines into a single data object containing post-secondary education levels by age and gender by SA3. </span></code></pre></div>
<p>Your preamble might also pose a research question that the script will answer.</p>
<p><strong>Good</strong></p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Do women have higher levels of educational attainment than men, within the same geographical areas and age groups?</span></code></pre></div>
<p>Your preamble shouldn’t be a terse, inscrutable comment.</p>
<p><strong>Bad</strong></p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># make ABS ed data graph</span></code></pre></div>
<p>If it’s hard to concisely describe what your script does in a few lines of plain English, that might be a sign that your script does too many things. Consider breaking your analysis into a series of scripts. See <a href="organising-projects.html#organising-projects">Organising R Projects at Grattan</a> for more.</p>
<p>Your preamble should anticipate and answer any questions other people might have when reviewing your script. For example:</p>
<p><strong>Good</strong></p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># This script calculates average income by age group and sex using the ABS Household Expenditure Survey and joins this to health information by age groups and sex from the National Health Survey. Note that we can't use the income variable in the NHS for this purpose, as it only contains information about respondents' income decile, not the income itself.</span></code></pre></div>
<p>The preamble should pertain the the code contained in the specific script. If you have comments or information about your analysis as a whole, put it in your <a href="organising-projects.html#README">README file</a>.</p>
</div>
<div id="use-comments" class="section level2" number="4.4">
<h2>
<span class="header-section-number">4.4</span> Use comments<a class="anchor" aria-label="anchor" href="#use-comments"><i class="fas fa-link"></i></a>
</h2>
<p>Comments are necessary where the code <em>alone</em> doesn’t tell the full story. Comments should tell the reader <strong>why</strong> you’re doing something, rather than just <strong>what</strong> you’re doing.</p>
<p>For example, comments are important when groups are coded with numbers rather than character strings, because this might not be obvious to someone reading your script:</p>
<p><strong>Necessary to comment</strong></p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">data</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">==</span> <span class="fl">1</span>,   <span class="co"># Keep only male observations</span>
         <span class="va">age</span> <span class="op">==</span> <span class="st">"05"</span><span class="op">)</span>   <span class="co"># Keep only 35-39 year-olds. </span></code></pre></div>
<p>Without the comment, readers of your code might not be aware that <code>1</code> in this dataset corresponds to <code>male</code>, or that <code>age == "05"</code> refers to 35-39 year olds. Without the comment, the code is not self-explanatory.</p>
<p>If your code <em>is</em> self-explanatory, you can include or omit comments as you see fit.</p>
<p><strong>Not necessary (but okay if included)</strong></p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We want to only look at women aged 35-39</span>
<span class="va">data</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">gender</span> <span class="op">==</span> <span class="st">"Female"</span>,
         <span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">35</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&lt;=</span> <span class="fl">39</span><span class="op">)</span></code></pre></div>
<p>You should also include comments where your code is more complex and may not be easily understood by the reader. If you’re using a function from a package that isn’t commonly used at Grattan, include a comment to explain what it does.</p>
<p><em>Err on the side of commenting more</em>, rather than less, throughout your code. Something may seem obvious to you when you’re writing your code, but it might not be obvious to the person reading your code, even if that person is you in the future. Better to over-comment than under-comment.</p>
<p>Comments can go above code chunks, or next to code - there are examples of both above.</p>
<div class="inline-figure">Try to keep them up-to-date.
<img src="atlas/code-comments.png" width="100%">
## Breaking your script into chunks</div>
<p>It’s useful to break a lengthy script into chunks with <code>-----</code> (three or more hyphens).</p>
<p><strong>Good</strong></p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Read file A -----</span>

<span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/a.csv"</span><span class="op">)</span>

<span class="co"># Read file B -----</span>

<span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/b.csv"</span><span class="op">)</span>

<span class="co"># Combine files A and B ----</span>

<span class="va">c</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span></code></pre></div>
<p>(In practice, you’ll have more than one line of code in each block.)</p>
<p>This helps you, and others, navigate your code better, using the navigation tool built in to RStudio. In the script editor pane of RStudio, at the bottom left, there’s a little navigation tool that helps you easily jump between named sections of your script.</p>
<div class="inline-figure">
<img src="atlas/rstudio_navigation.png"><!-- -->
</div>
<p>Breaking your script into chunks with <code>-----</code> also makes your code easier to read.</p>
</div>
<div id="assigning-values-to-objects" class="section level2" number="4.5">
<h2>
<span class="header-section-number">4.5</span> Assigning values to objects<a class="anchor" aria-label="anchor" href="#assigning-values-to-objects"><i class="fas fa-link"></i></a>
</h2>
<p>In R, you work with objects. An object might be a data frame, or a vector of numbers or letters, or a list. Functions can be objects, too.</p>
<p><strong>Use the <code>&lt;-</code> operator to assign values to objects</strong>. Here are some <strong>good</strong> examples:</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">schools</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/schools_data.csv"</span><span class="op">)</span>

<span class="va">three_letters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span>

<span class="va">lf</span> <span class="op">&lt;-</span> <span class="va">labour_force</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">status</span> <span class="op">!=</span> <span class="st">"NILF"</span><span class="op">)</span></code></pre></div>
<p>Avoid <code>-&gt;</code>, <code>=</code> and <code><a href="https://rdrr.io/r/base/assign.html">assign()</a></code>. Here are some <strong>bad</strong> examples::</p>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">schools</span> <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"data/schools_data.csv"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/assign.html">assign</a></span><span class="op">(</span><span class="st">"three_letters"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">)</span>

<span class="va">labour_force</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">status</span> <span class="op">!=</span> <span class="st">"NILF"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">lf</span></code></pre></div>
<p>All these bad operators will work, but they are best avoided. The <code>=</code> operator is avoided for reasons of visual consistency, style, and to avoid confusion. <code><a href="https://rdrr.io/r/base/assign.html">assign()</a></code> is avoided because it can lead to unexpected behaviour, and is usually not the best way to do what you want to do. The <code>-&gt;</code> operator is avoided because it’s easy to miss when skimming over code.</p>
<p>The <code>&lt;&lt;-</code> operator should also be avoided.</p>
</div>
<div id="naming-objects-and-variables" class="section level2" number="4.6">
<h2>
<span class="header-section-number">4.6</span> Naming objects and variables<a class="anchor" aria-label="anchor" href="#naming-objects-and-variables"><i class="fas fa-link"></i></a>
</h2>
<p>It’s important to be consistent when naming things. This saves you time when writing code. If you use a consistent naming convention, you don’t need to stop to remember if your object is called <code>ed_by_age</code> or <code>edByAge</code> or <code>ed.by.age</code>. Having a consistent naming convention across Grattan also makes it easy to read and QC each other’s code.</p>
<p>Grattan uses <em>words separated by underscores</em> <code>_</code> (aka ‘snake_case’) to name objects and variables. This is <a href="https://style.tidyverse.org/syntax.html#object-names">common practice across the Tidyverse</a>.
Object names should be descriptive and not-too-long. This is a trade-off, and one that’s sometimes hard to get right. However, using snake_case provides consistency:</p>
<p><strong>Good object names</strong></p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sa3_population</span>
<span class="va">gdp_growth_vic</span>
<span class="va">uni_attainment</span></code></pre></div>
<p><strong>Bad object names</strong></p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sa3Pop</span>
<span class="va">GDPgrowthVIC</span>
<span class="va">uni.attainment</span></code></pre></div>
<p>Variable names face a similar trade-off. Again, try to be descriptive and short using snake_case:</p>
<p><strong>Good variable names</strong></p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gender</span>
<span class="va">gdp_growth</span>
<span class="va">highest_edu</span></code></pre></div>
<p><strong>Bad variable names</strong></p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">s801LHSAA</span>
<span class="va">gdp.growth</span>
<span class="va">highEdu</span>
<span class="va">chaosVar_name.silly</span>
<span class="va">var2</span></code></pre></div>
<p>When you load data from outside Grattan, such as ABS microdata, variables will often have bad names. It is worth taking the time at the top of your script to <a href="https://dplyr.tidyverse.org/reference/select.html">rename your variables</a>, giving them consistent, descriptive, short, snake_case names. An easy way to do this is using <code>clean_names()</code> function from the <code>janitor</code> package:</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df_with_bad_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>firstColumn <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>,
                                Second.column <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">4</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span>

<span class="va">df_with_good_names</span> <span class="op">&lt;-</span> <span class="fu">janitor</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/janitor/man/clean_names.html">clean_names</a></span><span class="op">(</span><span class="va">df_with_bad_names</span><span class="op">)</span>

<span class="va">df_with_good_names</span></code></pre></div>
<pre><code>##   first_column second_column
## 1            1             4
## 2            2             5
## 3            3             6</code></pre>
<p>The most important thing is that your code is internally consistent - you should stick to one naming convention for all your objects and variables. Using snake_case, which we strongly recommend, reduces friction for other people reading and editing your code. Using short names saves effort when coding. Using descriptive names makes your code easier to read and understand.</p>
</div>
<div id="spacing" class="section level2" number="4.7">
<h2>
<span class="header-section-number">4.7</span> Spacing<a class="anchor" aria-label="anchor" href="#spacing"><i class="fas fa-link"></i></a>
</h2>
<p>Giving your code room to breathe greatly helps readability for future-you and others who will have to read your code. Code without ample whitespace is hard to read, justasitishardertoreadEnglishsentenceswithoutspaces.</p>
<div id="assign-and-equals" class="section level3" number="4.7.1">
<h3>
<span class="header-section-number">4.7.1</span> Assign and equals<a class="anchor" aria-label="anchor" href="#assign-and-equals"><i class="fas fa-link"></i></a>
</h3>
<p>Put a space each side of an assign operator <code>&lt;-</code>, equals <code>=</code>, and other ‘infix operators’ (<code>==</code>, <code>+</code>, <code>-</code>, and so on).</p>
<p><strong>Good</strong></p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">uni_attainment</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">age</span> <span class="op">==</span> <span class="fl">25</span>, <span class="va">gender</span> <span class="op">==</span> <span class="st">"Female"</span><span class="op">)</span></code></pre></div>
<p><strong>Bad</strong></p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">uni_attainment</span><span class="op">&lt;-</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">data</span>,<span class="va">age</span><span class="op">==</span><span class="fl">25</span>,<span class="va">gender</span><span class="op">==</span><span class="st">"Female"</span><span class="op">)</span></code></pre></div>
<p>Exceptions are operators that <em>directly connect</em> to an object, package or function, which should <strong>not</strong> have spaces on either side: <code>::</code>, <code>$</code>, <code>@</code>, <code>[</code>, <code>[[</code>, etc.</p>
<p><strong>Good</strong></p>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">uni_attainment</span><span class="op">$</span><span class="va">gender</span>
<span class="va">uni_attainment</span><span class="op">$</span><span class="va">age</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>
<span class="fu">readabs</span><span class="fu">::</span><span class="fu">read_abs</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><strong>Bad</strong></p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">uni_attainment</span> <span class="op">$</span> <span class="va">gender</span>
<span class="va">uni_attainment</span><span class="op">$</span> <span class="va">age</span> <span class="op">[</span> <span class="fl">1</span> <span class="op">:</span> <span class="fl">10</span><span class="op">]</span>
<span class="fu">readabs</span> <span class="fu">::</span> <span class="fu">read_abs</span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
<div id="commas" class="section level3" number="4.7.2">
<h3>
<span class="header-section-number">4.7.2</span> Commas<a class="anchor" aria-label="anchor" href="#commas"><i class="fas fa-link"></i></a>
</h3>
<p>Always put a space <em>after</em> a comma and not before, just like in regular English.</p>
<p><strong>Good</strong></p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">age</span>, <span class="va">gender</span>, <span class="va">sa2</span>, <span class="va">sa3</span><span class="op">)</span></code></pre></div>
<p><strong>Bad</strong></p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">data</span>,<span class="va">age</span>,<span class="va">gender</span>,<span class="va">sa2</span>,<span class="va">sa3</span><span class="op">)</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">data</span> ,<span class="va">age</span> ,<span class="va">gender</span> ,<span class="va">sa2</span> ,<span class="va">sa3</span><span class="op">)</span></code></pre></div>
</div>
<div id="parentheses" class="section level3" number="4.7.3">
<h3>
<span class="header-section-number">4.7.3</span> Parentheses<a class="anchor" aria-label="anchor" href="#parentheses"><i class="fas fa-link"></i></a>
</h3>
<p>Do not use spaces around parentheses in most cases:</p>
<p><strong>Good</strong></p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><strong>Bad</strong></p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span> <span class="op">(</span><span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span> <span class="va">x</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span></code></pre></div>
<p>For spacing rules around <code>if</code>, <code>for</code>, <code>while</code>, and <code>function</code>, see <a href="https://style.tidyverse.org/syntax.html#parentheses">the Tidyverse guide</a>.</p>
</div>
</div>
<div id="short-lines-line-indentation-and-the-pipe" class="section level2" number="4.8">
<h2>
<span class="header-section-number">4.8</span> Short lines, line indentation and the pipe <code>%&gt;%</code><a class="anchor" aria-label="anchor" href="#short-lines-line-indentation-and-the-pipe"><i class="fas fa-link"></i></a>
</h2>
<p>Keeping your lines of code short and indenting them in a consistent way can help make reading code much easier. If you are supplying multiple arguments to a function, it’s generally a good idea to put each argument on a new line - hit enter/return after the comma, like in the <code>rename</code> and <code>filter</code> examples below. Indentation makes it clear where a code block starts and finishes.</p>
<p>Using pipes (<code>%&gt;%</code>) instead of nesting functions also makes things clearer.<a class="footnote-ref" tabindex="0" data-toggle="popover" data-content='&lt;p&gt;The pipe is from the &lt;code&gt;magrittr&lt;/code&gt; package and is used to chain functions together, so that the output from one function becomes the input to the next function. The pipe is loaded as part of the &lt;a href="coding-style.html#tidyverse"&gt;&lt;code&gt;tidyverse&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;'><sup>20</sup></a> The pipe should always have a space before it, and should generally be followed by a new line, as in this example:</p>
<p><strong>Good: short lines and indentation</strong></p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">young_qual_income</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>gender <span class="op">=</span> <span class="va">s801LHSAA</span>,
         uni_attainment <span class="op">=</span> <span class="va">high.ed</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">income</span> <span class="op">&gt;</span> <span class="fl">0</span>,
         <span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">25</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&lt;=</span> <span class="fl">34</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span>, 
           <span class="va">uni_attainment</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">income</span>, 
                               na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Without indentation, the code is harder to read. It’s not clear where the chunk starts and finishes, and which bits of code are arguments to which functions.</p>
<p><strong>Bad: short lines, no indentation</strong></p>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">young_qual_income</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span> 
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>gender <span class="op">=</span> <span class="va">s801LHSAA</span>,
uni_attainment <span class="op">=</span> <span class="va">high.ed</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span> 
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">income</span> <span class="op">&gt;</span> <span class="fl">0</span>,
<span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">25</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&lt;=</span> <span class="fl">34</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">uni_attainment</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span> 
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">income</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Long lines are also bad and hard to read.
<strong>Bad: long lines</strong></p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">young_qual_income</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>gender <span class="op">=</span> <span class="va">s801LHSAA</span>, uni_attainment <span class="op">=</span> <span class="va">high.ed</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">income</span> <span class="op">&gt;</span> <span class="fl">0</span>, <span class="va">age</span> <span class="op">&gt;=</span> <span class="fl">25</span> <span class="op">&amp;</span> <span class="va">age</span> <span class="op">&lt;=</span> <span class="fl">34</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">gender</span>, <span class="va">uni_attainment</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/strayr/man/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>mean_income <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">income</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>When you want to take the output of a function and pass it as the input to another function, use the pipe (<code>%&gt;%</code>). Don’t write ugly, inscrutable code like this, where multiple functions are wrapped around other functions.</p>
<p><strong>War-crime bad: long lines without pipes</strong></p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">young_qual_income</span><span class="op">&lt;-</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span><span class="va">data</span>,gender<span class="op">=</span><span class="va">s801LHSAA</span>,uni_attainment<span class="op">=</span><span class="va">high.ed</span><span class="op">)</span>,<span class="va">income</span><span class="op">&gt;</span><span class="fl">0</span>,<span class="va">age</span><span class="op">&gt;=</span><span class="fl">25</span><span class="op">&amp;</span><span class="va">age</span><span class="op">&lt;=</span><span class="fl">34</span><span class="op">)</span>,<span class="va">uni_attainment</span><span class="op">)</span>,mean_income<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">income</span>,na.rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Writing clear code chunks, where functions are strung together with a pipe (<code>%&gt;%</code>), makes your code much more expressive and able to be read and understood. This is another reason to favour R over something like Excel, which pushes people to piece together functions into Frankenstein’s monsters like this:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="coding-style.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="ot">=</span><span class="fu">IF</span>(<span class="sc">$</span><span class="at">G16 =</span> <span class="st">"All day"</span>, <span class="fu">INDEX</span>(metrics<span class="sc">!</span><span class="er">$</span>D<span class="sc">$</span><span class="dv">8</span><span class="sc">:</span><span class="er">$</span>H<span class="sc">$</span><span class="dv">66</span>, <span class="fu">MATCH</span>(<span class="fu">INDEX</span>(correspondence<span class="sc">!</span><span class="er">$</span>B<span class="sc">$</span><span class="dv">2</span><span class="sc">:</span><span class="er">$</span>B<span class="sc">$</span><span class="dv">23</span>, <span class="fu">MATCH</span>(<span class="st">'convert to tibble'</span><span class="sc">!</span>M<span class="sc">$</span><span class="dv">4</span>, correspondence<span class="sc">!</span><span class="er">$</span>A<span class="sc">$</span><span class="dv">2</span><span class="sc">:</span><span class="er">$</span>A<span class="sc">$</span><span class="dv">23</span>, <span class="dv">0</span>)), metrics<span class="sc">!</span><span class="er">$</span>B<span class="sc">$</span><span class="dv">8</span><span class="sc">:</span><span class="er">$</span>B<span class="sc">$</span><span class="dv">66</span>, <span class="dv">0</span>), <span class="fu">MATCH</span>(<span class="st">'convert to tibble'</span><span class="sc">!</span><span class="er">$</span>E16, metrics<span class="sc">!</span><span class="er">$</span>D<span class="sc">$</span><span class="dv">4</span><span class="sc">:</span><span class="er">$</span>H<span class="sc">$</span><span class="dv">4</span>, <span class="dv">0</span>)), <span class="st">"NA"</span>)</span></code></pre></div>
<p>I just threw up in my mouth a little bit.</p>
<p>The pipe function <code>%&gt;%</code> can make code more easy to write and read. The pipe can create the temptation to string together lots and lots of functions into one block of code. This can make things harder to read and understand.</p>
<p>Resist the urge to use the pipe to make code blocks too long. A block of code should generally do one thing, or a small number of things.</p>
</div>
<div id="omit-needless-code" class="section level2" number="4.9">
<h2>
<span class="header-section-number">4.9</span> Omit needless code<a class="anchor" aria-label="anchor" href="#omit-needless-code"><i class="fas fa-link"></i></a>
</h2>
<p>Don’t retain code that ultimately didn’t lead anywhere. If you produced a graph that ended up not being used, don’t keep the code in your script - if you want to save it, move it to a subfolder named ‘archive’ or similar. Your code should include the steps needed to go from your raw data to your output - and not extraneous steps. If you ask someone to QC your work, they shouldn’t have to wade through 1000 lines of code just to find the 200 lines that are actually required to produce your output.</p>
<p>When you’re doing data analysis, you’ll often give R interactive commands to help you understand what your data looks like. For example, you might view a dataframe with <code>View(mydf)</code> or <code>str(mydf)</code>. This is fine, and often necessary, when you’re doing your analysis. <strong>Don’t keep these commands in your script</strong>. These type of commands should usually be entered straight into the R console, not in a script. If they’re in your script, delete them.</p>

</div>
</div>

  <div class="chapter-nav">
<div class="prev"><a href="organising-projects.html"><span class="header-section-number">3</span> Organising an R project at Grattan</a></div>
<div class="next"><a href="packages.html"><span class="header-section-number">5</span> Using packages</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#coding-style"><span class="header-section-number">4</span> Grattan’s coding style and the tidyverse</a></li>
<li>
<a class="nav-link" href="#tidyverse"><span class="header-section-number">4.1</span> The tidyverse</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#why-do-we-use-the-tidyverse"><span class="header-section-number">4.1.1</span> Why do we use the tidyverse?</a></li></ul>
</li>
<li><a class="nav-link" href="#load-packages-first"><span class="header-section-number">4.2</span> Load packages first</a></li>
<li><a class="nav-link" href="#script-preamble"><span class="header-section-number">4.3</span> Script preamble</a></li>
<li><a class="nav-link" href="#use-comments"><span class="header-section-number">4.4</span> Use comments</a></li>
<li><a class="nav-link" href="#assigning-values-to-objects"><span class="header-section-number">4.5</span> Assigning values to objects</a></li>
<li><a class="nav-link" href="#naming-objects-and-variables"><span class="header-section-number">4.6</span> Naming objects and variables</a></li>
<li>
<a class="nav-link" href="#spacing"><span class="header-section-number">4.7</span> Spacing</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#assign-and-equals"><span class="header-section-number">4.7.1</span> Assign and equals</a></li>
<li><a class="nav-link" href="#commas"><span class="header-section-number">4.7.2</span> Commas</a></li>
<li><a class="nav-link" href="#parentheses"><span class="header-section-number">4.7.3</span> Parentheses</a></li>
</ul>
</li>
<li><a class="nav-link" href="#short-lines-line-indentation-and-the-pipe"><span class="header-section-number">4.8</span> Short lines, line indentation and the pipe %&gt;%</a></li>
<li><a class="nav-link" href="#omit-needless-code"><span class="header-section-number">4.9</span> Omit needless code</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Using R at Grattan Institute</strong>" was written by Matt Cowgill, Will Mackey, and James Ha. It was last built on 2021-12-07.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
