<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8 Data transformation | Using R at Grattan Institute</title>
  <meta name="description" content="How to use R at Grattan good. In development." />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="8 Data transformation | Using R at Grattan Institute" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="How to use R at Grattan good. In development." />
  <meta name="github-repo" content="grattan/R_at_Grattan" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8 Data transformation | Using R at Grattan Institute" />
  
  <meta name="twitter:description" content="How to use R at Grattan good. In development." />
  

<meta name="author" content="Will Mackey and Matt Cowgill" />


<meta name="date" content="2019-11-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="different-data-types.html">
<link rel="next" href="analysis.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Using R at Grattan Institute</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="part"><span><b>I What is R and why do we use it?</b></span></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#what-is-rstudio"><i class="fa fa-check"></i><b>1.2</b> What is RStudio?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>1.3</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#learning-more-about-r"><i class="fa fa-check"></i><b>1.4</b> Learning more about R</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="why-use-r.html"><a href="why-use-r.html"><i class="fa fa-check"></i><b>2</b> Why use R?</a><ul>
<li class="chapter" data-level="2.1" data-path="why-use-r.html"><a href="why-use-r.html#why-script"><i class="fa fa-check"></i><b>2.1</b> Why use script-based software?</a></li>
<li class="chapter" data-level="2.2" data-path="why-use-r.html"><a href="why-use-r.html#why-R"><i class="fa fa-check"></i><b>2.2</b> Why use R specifically?</a></li>
</ul></li>
<li class="part"><span><b>II Using R the Grattan way</b></span></li>
<li class="chapter" data-level="3" data-path="organising-projects.html"><a href="organising-projects.html"><i class="fa fa-check"></i><b>3</b> Organising an R project at Grattan</a><ul>
<li class="chapter" data-level="3.1" data-path="organising-projects.html"><a href="organising-projects.html#rproj"><i class="fa fa-check"></i><b>3.1</b> Use RStudio projects, not <code>setwd()</code></a></li>
<li class="chapter" data-level="3.2" data-path="organising-projects.html"><a href="organising-projects.html#use-relative-filepaths"><i class="fa fa-check"></i><b>3.2</b> Use relative filepaths</a></li>
<li class="chapter" data-level="3.3" data-path="organising-projects.html"><a href="organising-projects.html#keep-your-stuff-together"><i class="fa fa-check"></i><b>3.3</b> Keep your stuff together</a></li>
<li class="chapter" data-level="3.4" data-path="organising-projects.html"><a href="organising-projects.html#manageable"><i class="fa fa-check"></i><b>3.4</b> Keep your scripts manageable</a></li>
<li class="chapter" data-level="3.5" data-path="organising-projects.html"><a href="organising-projects.html#README"><i class="fa fa-check"></i><b>3.5</b> Include a README file</a></li>
<li class="chapter" data-level="3.6" data-path="organising-projects.html"><a href="organising-projects.html#omit-needless-code"><i class="fa fa-check"></i><b>3.6</b> Omit needless code</a></li>
<li class="chapter" data-level="3.7" data-path="organising-projects.html"><a href="organising-projects.html#rules_9a_final_final_mc"><i class="fa fa-check"></i><b>3.7</b> Rules_9a_FINAL_FINAL_MC</a></li>
<li class="chapter" data-level="3.8" data-path="organising-projects.html"><a href="organising-projects.html#clean-workspace"><i class="fa fa-check"></i><b>3.8</b> Keep your workspace clean</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="coding-style.html"><a href="coding-style.html"><i class="fa fa-check"></i><b>4</b> Grattan coding style</a><ul>
<li class="chapter" data-level="4.1" data-path="coding-style.html"><a href="coding-style.html#load-packages-first"><i class="fa fa-check"></i><b>4.1</b> Load packages first</a></li>
<li class="chapter" data-level="4.2" data-path="coding-style.html"><a href="coding-style.html#script-preamble"><i class="fa fa-check"></i><b>4.2</b> Script preamble</a></li>
<li class="chapter" data-level="4.3" data-path="coding-style.html"><a href="coding-style.html#use-comments"><i class="fa fa-check"></i><b>4.3</b> Use comments</a></li>
<li class="chapter" data-level="4.4" data-path="coding-style.html"><a href="coding-style.html#breaking-your-script-into-chunks"><i class="fa fa-check"></i><b>4.4</b> Breaking your script into chunks</a></li>
<li class="chapter" data-level="4.5" data-path="coding-style.html"><a href="coding-style.html#assigning-values-to-objects"><i class="fa fa-check"></i><b>4.5</b> Assigning values to objects</a></li>
<li class="chapter" data-level="4.6" data-path="coding-style.html"><a href="coding-style.html#naming-objects-and-variables"><i class="fa fa-check"></i><b>4.6</b> Naming objects and variables</a></li>
<li class="chapter" data-level="4.7" data-path="coding-style.html"><a href="coding-style.html#spacing"><i class="fa fa-check"></i><b>4.7</b> Spacing</a><ul>
<li class="chapter" data-level="4.7.1" data-path="coding-style.html"><a href="coding-style.html#assign-and-equals"><i class="fa fa-check"></i><b>4.7.1</b> Assign and equals</a></li>
<li class="chapter" data-level="4.7.2" data-path="coding-style.html"><a href="coding-style.html#commas"><i class="fa fa-check"></i><b>4.7.2</b> Commas</a></li>
<li class="chapter" data-level="4.7.3" data-path="coding-style.html"><a href="coding-style.html#parentheses"><i class="fa fa-check"></i><b>4.7.3</b> Parentheses</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="coding-style.html"><a href="coding-style.html#short-lines-line-indentation-and-the-pipe"><i class="fa fa-check"></i><b>4.8</b> Short lines, line indentation and the pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.9" data-path="coding-style.html"><a href="coding-style.html#blocks-of-code"><i class="fa fa-check"></i><b>4.9</b> Blocks of code</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>5</b> Packages commonly used at Grattan</a><ul>
<li class="chapter" data-level="5.1" data-path="packages.html"><a href="packages.html#install-packages"><i class="fa fa-check"></i><b>5.1</b> Installing packages</a></li>
<li class="chapter" data-level="5.2" data-path="packages.html"><a href="packages.html#using-packages"><i class="fa fa-check"></i><b>5.2</b> Using packages</a></li>
<li class="chapter" data-level="5.3" data-path="packages.html"><a href="packages.html#tidyverse"><i class="fa fa-check"></i><b>5.3</b> The tidyverse!</a><ul>
<li class="chapter" data-level="5.3.1" data-path="packages.html"><a href="packages.html#why-do-we-use-the-tidyverse"><i class="fa fa-check"></i><b>5.3.1</b> Why do we use the tidyverse?</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="packages.html"><a href="packages.html#grattan-specific-packages"><i class="fa fa-check"></i><b>5.4</b> Grattan-specific packages</a></li>
<li class="chapter" data-level="5.5" data-path="packages.html"><a href="packages.html#other-commonly-used-packages"><i class="fa fa-check"></i><b>5.5</b> Other commonly-used packages</a></li>
</ul></li>
<li class="part"><span><b>III Load, manipulate and visualise data</b></span></li>
<li class="chapter" data-level="6" data-path="reading-data.html"><a href="reading-data.html"><i class="fa fa-check"></i><b>6</b> Reading data</a><ul>
<li class="chapter" data-level="6.1" data-path="reading-data.html"><a href="reading-data.html#importing-data"><i class="fa fa-check"></i><b>6.1</b> Importing data</a><ul>
<li class="chapter" data-level="6.1.1" data-path="reading-data.html"><a href="reading-data.html#reading-csv-files"><i class="fa fa-check"></i><b>6.1.1</b> Reading CSV files</a></li>
<li class="chapter" data-level="6.1.2" data-path="reading-data.html"><a href="reading-data.html#readxlread_excel"><i class="fa fa-check"></i><b>6.1.2</b> <code>readxl::read_excel()</code></a></li>
<li class="chapter" data-level="6.1.3" data-path="reading-data.html"><a href="reading-data.html#rio"><i class="fa fa-check"></i><b>6.1.3</b> <code>rio</code></a></li>
<li class="chapter" data-level="6.1.4" data-path="reading-data.html"><a href="reading-data.html#readabs"><i class="fa fa-check"></i><b>6.1.4</b> <code>readabs</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="reading-data.html"><a href="reading-data.html#reading-common-files"><i class="fa fa-check"></i><b>6.2</b> Reading common files:</a></li>
<li class="chapter" data-level="6.3" data-path="reading-data.html"><a href="reading-data.html#appropriately-renaming-variables"><i class="fa fa-check"></i><b>6.3</b> Appropriately renaming variables</a></li>
<li class="chapter" data-level="6.4" data-path="reading-data.html"><a href="reading-data.html#getting-to-tidy-data"><i class="fa fa-check"></i><b>6.4</b> Getting to tidy data</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="different-data-types.html"><a href="different-data-types.html"><i class="fa fa-check"></i><b>7</b> Different data types</a><ul>
<li class="chapter" data-level="7.1" data-path="different-data-types.html"><a href="different-data-types.html#tidy-data"><i class="fa fa-check"></i><b>7.1</b> Tidy data</a></li>
<li class="chapter" data-level="7.2" data-path="different-data-types.html"><a href="different-data-types.html#dates-with-lubridate"><i class="fa fa-check"></i><b>7.2</b> Dates with <code>lubridate::</code></a></li>
<li class="chapter" data-level="7.3" data-path="different-data-types.html"><a href="different-data-types.html#strings-with-stringr"><i class="fa fa-check"></i><b>7.3</b> Strings with <code>stringr::</code></a></li>
<li class="chapter" data-level="7.4" data-path="different-data-types.html"><a href="different-data-types.html#factors-with-forcats"><i class="fa fa-check"></i><b>7.4</b> Factors with <code>forcats::</code></a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>8</b> Data transformation</a><ul>
<li class="chapter" data-level="8.1" data-path="data-transformation.html"><a href="data-transformation.html#set-up"><i class="fa fa-check"></i><b>8.1</b> Set up</a></li>
<li class="chapter" data-level="8.2" data-path="data-transformation.html"><a href="data-transformation.html#the-pipe"><i class="fa fa-check"></i><b>8.2</b> The pipe: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="8.3" data-path="data-transformation.html"><a href="data-transformation.html#key-dplyr-functions"><i class="fa fa-check"></i><b>8.3</b> Key <code>dplyr</code> functions:</a></li>
<li class="chapter" data-level="8.4" data-path="data-transformation.html"><a href="data-transformation.html#select-variables-with-select"><i class="fa fa-check"></i><b>8.4</b> Select variables with <code>select()</code></a><ul>
<li class="chapter" data-level="8.4.1" data-path="data-transformation.html"><a href="data-transformation.html#selecting-groups-of-variables"><i class="fa fa-check"></i><b>8.4.1</b> Selecting groups of variables</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="data-transformation.html"><a href="data-transformation.html#filter-with-filter"><i class="fa fa-check"></i><b>8.5</b> Filter with <code>filter()</code></a><ul>
<li class="chapter" data-level="8.5.1" data-path="data-transformation.html"><a href="data-transformation.html#conditions-logical-operations-true-or-false"><i class="fa fa-check"></i><b>8.5.1</b> Conditions; logical operations; <code>TRUE</code> or <code>FALSE</code></a></li>
<li class="chapter" data-level="8.5.2" data-path="data-transformation.html"><a href="data-transformation.html#filtering-data-with-filter"><i class="fa fa-check"></i><b>8.5.2</b> Filtering data with <code>filter</code></a></li>
<li class="chapter" data-level="8.5.3" data-path="data-transformation.html"><a href="data-transformation.html#grouped-filtering-with-group_by"><i class="fa fa-check"></i><b>8.5.3</b> Grouped filtering with <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="data-transformation.html"><a href="data-transformation.html#edit-and-add-new-variables-with-mutate"><i class="fa fa-check"></i><b>8.6</b> Edit and add new variables with <code>mutate()</code></a><ul>
<li class="chapter" data-level="8.6.1" data-path="data-transformation.html"><a href="data-transformation.html#using-if_else-or-case_when"><i class="fa fa-check"></i><b>8.6.1</b> Using <code>if_else()</code> or <code>case_when()</code></a></li>
<li class="chapter" data-level="8.6.2" data-path="data-transformation.html"><a href="data-transformation.html#grouped-mutates-with-group_by"><i class="fa fa-check"></i><b>8.6.2</b> Grouped mutates with <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="data-transformation.html"><a href="data-transformation.html#summarise-data-with-summarise"><i class="fa fa-check"></i><b>8.7</b> Summarise data with <code>summarise()</code></a><ul>
<li class="chapter" data-level="8.7.1" data-path="data-transformation.html"><a href="data-transformation.html#grouped-summaries-with-group_by"><i class="fa fa-check"></i><b>8.7.1</b> Grouped summaries with <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="data-transformation.html"><a href="data-transformation.html#arrange-with-arrange"><i class="fa fa-check"></i><b>8.8</b> Arrange with <code>arrange()</code></a></li>
<li class="chapter" data-level="8.9" data-path="data-transformation.html"><a href="data-transformation.html#joining-datasets-with-_join"><i class="fa fa-check"></i><b>8.9</b> Joining datasets with <code>*_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>9</b> Analysis</a></li>
<li class="chapter" data-level="10" data-path="data-visualisation.html"><a href="data-visualisation.html"><i class="fa fa-check"></i><b>10</b> Data Visualisation</a><ul>
<li class="chapter" data-level="10.1" data-path="data-visualisation.html"><a href="data-visualisation.html#introduction-to-data-visualisation"><i class="fa fa-check"></i><b>10.1</b> Introduction to data visualisation</a></li>
<li class="chapter" data-level="10.2" data-path="data-visualisation.html"><a href="data-visualisation.html#set-up-and-packages"><i class="fa fa-check"></i><b>10.2</b> Set-up and packages</a></li>
<li class="chapter" data-level="10.3" data-path="data-visualisation.html"><a href="data-visualisation.html#concepts"><i class="fa fa-check"></i><b>10.3</b> Concepts</a></li>
<li class="chapter" data-level="10.4" data-path="data-visualisation.html"><a href="data-visualisation.html#exploratory-data-visualisation"><i class="fa fa-check"></i><b>10.4</b> Exploratory data visualisation</a></li>
<li class="chapter" data-level="10.5" data-path="data-visualisation.html"><a href="data-visualisation.html#making-grattan-y-charts"><i class="fa fa-check"></i><b>10.5</b> Making Grattan-y charts</a><ul>
<li class="chapter" data-level="10.5.1" data-path="data-visualisation.html"><a href="data-visualisation.html#making-grattan-charts"><i class="fa fa-check"></i><b>10.5.1</b> Making Grattan charts</a></li>
<li class="chapter" data-level="10.5.2" data-path="data-visualisation.html"><a href="data-visualisation.html#saving-grattan-charts"><i class="fa fa-check"></i><b>10.5.2</b> Saving Grattan charts</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="data-visualisation.html"><a href="data-visualisation.html#adding-labels"><i class="fa fa-check"></i><b>10.6</b> Adding labels</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="chart-cookbook.html"><a href="chart-cookbook.html"><i class="fa fa-check"></i><b>11</b> Chart cookbook</a><ul>
<li class="chapter" data-level="11.1" data-path="chart-cookbook.html"><a href="chart-cookbook.html#set-up-1"><i class="fa fa-check"></i><b>11.1</b> Set up</a></li>
<li class="chapter" data-level="11.2" data-path="chart-cookbook.html"><a href="chart-cookbook.html#bar-charts"><i class="fa fa-check"></i><b>11.2</b> Bar charts</a><ul>
<li class="chapter" data-level="11.2.1" data-path="chart-cookbook.html"><a href="chart-cookbook.html#simple-bar-plot"><i class="fa fa-check"></i><b>11.2.1</b> Simple bar plot</a></li>
<li class="chapter" data-level="11.2.2" data-path="chart-cookbook.html"><a href="chart-cookbook.html#bar-multi"><i class="fa fa-check"></i><b>11.2.2</b> Bar plot with multiple series</a></li>
<li class="chapter" data-level="11.2.3" data-path="chart-cookbook.html"><a href="chart-cookbook.html#facet-bar"><i class="fa fa-check"></i><b>11.2.3</b> Facetted bar charts</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="chart-cookbook.html"><a href="chart-cookbook.html#line-charts"><i class="fa fa-check"></i><b>11.3</b> Line charts</a><ul>
<li class="chapter" data-level="11.3.1" data-path="chart-cookbook.html"><a href="chart-cookbook.html#simple-line-chart"><i class="fa fa-check"></i><b>11.3.1</b> Simple line chart</a></li>
<li class="chapter" data-level="11.3.2" data-path="chart-cookbook.html"><a href="chart-cookbook.html#line-chart-with-multiple-series"><i class="fa fa-check"></i><b>11.3.2</b> Line chart with multiple series</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="chart-cookbook.html"><a href="chart-cookbook.html#scatter-plots"><i class="fa fa-check"></i><b>11.4</b> Scatter plots</a><ul>
<li class="chapter" data-level="11.4.1" data-path="chart-cookbook.html"><a href="chart-cookbook.html#simple-scatter-plot"><i class="fa fa-check"></i><b>11.4.1</b> Simple scatter plot</a></li>
<li class="chapter" data-level="11.4.2" data-path="chart-cookbook.html"><a href="chart-cookbook.html#scatter-plot-with-reshaped-data"><i class="fa fa-check"></i><b>11.4.2</b> Scatter plot with reshaped data</a></li>
<li class="chapter" data-level="11.4.3" data-path="chart-cookbook.html"><a href="chart-cookbook.html#layered-scatter-plot"><i class="fa fa-check"></i><b>11.4.3</b> Layered scatter plot</a></li>
<li class="chapter" data-level="11.4.4" data-path="chart-cookbook.html"><a href="chart-cookbook.html#scatter-plots-with-trendlines"><i class="fa fa-check"></i><b>11.4.4</b> Scatter plots with trendlines</a></li>
<li class="chapter" data-level="11.4.5" data-path="chart-cookbook.html"><a href="chart-cookbook.html#facetted-scatter-plots"><i class="fa fa-check"></i><b>11.4.5</b> Facetted scatter plots</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="chart-cookbook.html"><a href="chart-cookbook.html#distributions"><i class="fa fa-check"></i><b>11.5</b> Distributions</a></li>
<li class="chapter" data-level="11.6" data-path="chart-cookbook.html"><a href="chart-cookbook.html#maps"><i class="fa fa-check"></i><b>11.6</b> Maps</a><ul>
<li class="chapter" data-level="11.6.1" data-path="chart-cookbook.html"><a href="chart-cookbook.html#sf-objects"><i class="fa fa-check"></i><b>11.6.1</b> <code>sf</code> objects</a></li>
<li class="chapter" data-level="11.6.2" data-path="chart-cookbook.html"><a href="chart-cookbook.html#using-absmapsdata"><i class="fa fa-check"></i><b>11.6.2</b> Using <code>absmapsdata</code></a></li>
<li class="chapter" data-level="11.6.3" data-path="chart-cookbook.html"><a href="chart-cookbook.html#making-choropleth-maps"><i class="fa fa-check"></i><b>11.6.3</b> Making choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="chart-cookbook.html"><a href="chart-cookbook.html#creating-simple-interactive-graphs-with-plotly"><i class="fa fa-check"></i><b>11.7</b> Creating simple interactive graphs with <code>plotly</code></a></li>
</ul></li>
<li class="part"><span><b>IV Advanced topics</b></span></li>
<li class="chapter" data-level="12" data-path="creating-functions.html"><a href="creating-functions.html"><i class="fa fa-check"></i><b>12</b> Creating functions</a><ul>
<li class="chapter" data-level="12.1" data-path="creating-functions.html"><a href="creating-functions.html#it-can-be-useful-to-make-your-own-function"><i class="fa fa-check"></i><b>12.1</b> It can be useful to make your own function</a></li>
<li class="chapter" data-level="12.2" data-path="creating-functions.html"><a href="creating-functions.html#defining-simple-functions"><i class="fa fa-check"></i><b>12.2</b> Defining simple functions</a></li>
<li class="chapter" data-level="12.3" data-path="creating-functions.html"><a href="creating-functions.html#more-complex-functions"><i class="fa fa-check"></i><b>12.3</b> More complex functions</a></li>
<li class="chapter" data-level="12.4" data-path="creating-functions.html"><a href="creating-functions.html#sets-of-functions"><i class="fa fa-check"></i><b>12.4</b> Sets of functions</a></li>
<li class="chapter" data-level="12.5" data-path="creating-functions.html"><a href="creating-functions.html#using-purrrmap"><i class="fa fa-check"></i><b>12.5</b> Using <code>purrr::map</code></a></li>
<li class="chapter" data-level="12.6" data-path="creating-functions.html"><a href="creating-functions.html#sharing-your-useful-functions-with-grattan"><i class="fa fa-check"></i><b>12.6</b> Sharing your useful functions with Grattan</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>13</b> Version control</a><ul>
<li class="chapter" data-level="13.1" data-path="version-control.html"><a href="version-control.html#version-control-is-important-and-intimidating"><i class="fa fa-check"></i><b>13.1</b> Version control is important and intimidating</a></li>
<li class="chapter" data-level="13.2" data-path="version-control.html"><a href="version-control.html#github"><i class="fa fa-check"></i><b>13.2</b> Github</a></li>
<li class="chapter" data-level="13.3" data-path="version-control.html"><a href="version-control.html#git"><i class="fa fa-check"></i><b>13.3</b> Git</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Using R at Grattan Institute</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1">
<h1><span class="header-section-number">8</span> Data transformation</h1>
<p>This section focusses on transforming rectangular datasets.</p>
<div id="set-up" class="section level2">
<h2><span class="header-section-number">8.1</span> Set up</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>The <code>sa3_income</code> dataset will be used for all key examples in this chapter.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> It is a long dataset from the ABS that contains the average income and number of workers by Statistical Area 3, occupation and sex between 2010 and 2016.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">sa3_income &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/sa3_income.csv&quot;</span>)</a></code></pre></div>
<pre><code>## Parsed with column specification:
## cols(
##   sa3 = col_double(),
##   sa3_name = col_character(),
##   sa3_sqkm = col_double(),
##   sa3_income_percentile = col_double(),
##   sa4_name = col_character(),
##   gcc_name = col_character(),
##   state = col_character(),
##   occupation = col_character(),
##   occ_short = col_character(),
##   prof = col_character(),
##   gender = col_character(),
##   year = col_double(),
##   median_income = col_double(),
##   average_income = col_double(),
##   total_income = col_double(),
##   workers = col_double()
## )</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw">head</span>(sa3_income)</a></code></pre></div>
<pre><code>## # A tibble: 6 x 16
##     sa3 sa3_name sa3_sqkm sa3_income_perc… sa4_name gcc_name state
##   &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;            &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;    &lt;chr&gt;
## 1 10102 Queanbe…    6511.               80 Capital… Rest of… NSW  
## 2 10102 Queanbe…    6511.               76 Capital… Rest of… NSW  
## 3 10102 Queanbe…    6511.               78 Capital… Rest of… NSW  
## 4 10102 Queanbe…    6511.               76 Capital… Rest of… NSW  
## 5 10102 Queanbe…    6511.               74 Capital… Rest of… NSW  
## 6 10102 Queanbe…    6511.               79 Capital… Rest of… NSW  
## # … with 9 more variables: occupation &lt;chr&gt;, occ_short &lt;chr&gt;, prof &lt;chr&gt;,
## #   gender &lt;chr&gt;, year &lt;dbl&gt;, median_income &lt;dbl&gt;, average_income &lt;dbl&gt;,
## #   total_income &lt;dbl&gt;, workers &lt;dbl&gt;</code></pre>
</div>
<div id="the-pipe" class="section level2">
<h2><span class="header-section-number">8.2</span> The pipe: <code>%&gt;%</code></h2>
<p>You will almost always want to perform more than one of the operations described below on your dataset. One way to perform multiple operations, one after the other, is to ‘nest’ them inside. This nesting will be <em>painfully</em> familiar to Excel users.</p>
<p>Consider an example of baking and eating a cake.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> You take the ingredients, combine them, then mix, then bake, and then eat them. In a nested formula, this process looks like:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">eat</span>(<span class="kw">bake</span>(<span class="kw">mix</span>(<span class="kw">combine</span>(ingredients))))</a></code></pre></div>
<p>In a nested formula, you need to start in the <em>middle</em> and work your way out. This means anyone reading your code – including you in the future! – needs to start in the middle and work their way out. But because we’re used to left-right reading, we’re not particularly good at naturally interpreting nested functions like this one.</p>
<p>This is where the ‘pipe’ can help. The pipe operator <code>%&gt;%</code> (keyboard shortcut: <code>cmd + shift + m</code>) takes an argument on the left and ‘pipes’ it into the function on the right. Each time you see <code>%&gt;%</code>, you can read it as ‘and then’.</p>
<p>So the you could express the baking example as:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">ingredients <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># and then</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="st">  </span><span class="kw">combine</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># and then</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="st">  </span><span class="kw">mix</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># and then</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">  </span><span class="kw">bake</span>() <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># and then</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="st">  </span><span class="kw">eat</span>() <span class="co"># yum!</span></a></code></pre></div>
<p>Which reads as:</p>
<blockquote>
<p>take the <code>ingredients</code>, then <code>combine</code>, then <code>mix</code>, then <code>bake</code>, then <code>eat</code> them.</p>
</blockquote>
<p>This does the same thing as <code>eat(bake(mix(combine(ingredients))))</code>. But it’s much nicer and more natural to read, and to <em>write</em>.</p>
<p>Another example: the function <code>paste</code> takes arguments and combines them together into a single string. So you could use the pipe to:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="st">&quot;hello&quot;</span> <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;dear&quot;</span>, <span class="st">&quot;reader&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;hello dear reader&quot;</code></pre>
<p>which is the same as</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw">paste</span>(<span class="st">&quot;hello&quot;</span>, <span class="st">&quot;dear&quot;</span>, <span class="st">&quot;reader&quot;</span>)</a></code></pre></div>
<pre><code>## [1] &quot;hello dear reader&quot;</code></pre>
<p>Or you could define a vector of numbers and pass<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> them to the <code>sum()</code> function:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">my_numbers &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">13</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2"></a>
<a class="sourceLine" id="cb12-3" data-line-number="3">my_numbers <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">sum</span>()</a></code></pre></div>
<pre><code>## [1] 32</code></pre>
<p>Or you could skip the intermediate step altogether:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">13</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw">sum</span>()</a></code></pre></div>
<pre><code>## [1] 32</code></pre>
<p>This is the same as</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw">sum</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">8</span>, <span class="dv">13</span>))</a></code></pre></div>
<pre><code>## [1] 32</code></pre>
<p>The benefits of piping become more clear when you want to perform a few sequential operations on a dataset. For example, you might want to <code>filter</code> the observations in the <code>sa3_income</code> data to only <code>NSW</code>, before you <code>group_by</code> <code>gender</code> and <code>summarise</code> the <code>av_income</code> of these grops (these functions are explained in detail below). All of these functions take ‘data’ as the first argument, and are designed to be used with pipes.</p>
<p>Like the income differential it shows, writing this process as a nested function is outrageous and hard to read:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw">summarise</span>((<span class="kw">group_by</span>(<span class="kw">filter</span>(sa3_income, state <span class="op">==</span><span class="st"> &quot;NSW&quot;</span>), gender)), <span class="dt">av_mean_income =</span> <span class="kw">mean</span>(av_income))</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   gender av_mean_income
##   &lt;chr&gt;           &lt;dbl&gt;
## 1 Men            58202.
## 2 Women          41662.</code></pre>
<p>The original common way to avoid this unseemly nesting in <code>R</code> was to assign each ‘step’ its own object, which is definitely clearer:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">data1 &lt;-<span class="st"> </span><span class="kw">filter</span>(sa3_income, state <span class="op">==</span><span class="st"> &quot;NSW&quot;</span>)</a>
<a class="sourceLine" id="cb20-2" data-line-number="2">data2 &lt;-<span class="st"> </span><span class="kw">group_by</span>(data1, gender)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3">data3 &lt;-<span class="st"> </span><span class="kw">summarise</span>(data2, <span class="dt">av_mean_income =</span> <span class="kw">mean</span>(av_income))</a>
<a class="sourceLine" id="cb20-4" data-line-number="4">data3</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   gender av_mean_income
##   &lt;chr&gt;           &lt;dbl&gt;
## 1 Men            58202.
## 2 Women          41662.</code></pre>
<p>And using pipes make the steps clearer still:</p>
<ol style="list-style-type: decimal">
<li>take the <code>sa3_income</code> data, and then %&gt;%</li>
<li><code>filter</code> it to only NSW, and then %&gt;%</li>
<li><code>group</code> it by gender, and then %&gt;%</li>
<li><code>summarise</code> it</li>
</ol>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># and then</span></a>
<a class="sourceLine" id="cb22-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(state <span class="op">==</span><span class="st"> &quot;NSW&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># and then </span></a>
<a class="sourceLine" id="cb22-3" data-line-number="3"><span class="st">  </span><span class="kw">group_by</span>(gender) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># and then</span></a>
<a class="sourceLine" id="cb22-4" data-line-number="4"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">av_mean_income =</span> <span class="kw">mean</span>(av_income))</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   gender av_mean_income
##   &lt;chr&gt;           &lt;dbl&gt;
## 1 Men            58202.
## 2 Women          41662.</code></pre>
</div>
<div id="key-dplyr-functions" class="section level2">
<h2><span class="header-section-number">8.3</span> Key <code>dplyr</code> functions:</h2>
<p>All have the same syntax structure, which enable pipe-chains.</p>
</div>
<div id="select-variables-with-select" class="section level2">
<h2><span class="header-section-number">8.4</span> Select variables with <code>select()</code></h2>
<p>The <code>select</code> function takes a dataset and <strong>keeps</strong> or <strong>drops</strong> variables (columns) that are specified.</p>
<p>For example, look at the variables that are in the <code>sa3_income</code> dataset (using the <code>names()</code> function):</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="kw">names</span>(sa3_income)</a></code></pre></div>
<pre><code>## [1] &quot;year&quot;      &quot;sa3_name&quot;  &quot;state&quot;     &quot;gender&quot;    &quot;av_income&quot; &quot;workers&quot;</code></pre>
<p>If you wanted to keep just the <code>state</code> and <code>av_income</code> variables, you could take the <code>sa3_income</code> dataset and select just those variables:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb26-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(state, av_income)</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 2
##    state av_income
##    &lt;chr&gt;     &lt;dbl&gt;
##  1 SA       48760.
##  2 SA       38359.
##  3 SA       54343.
##  4 SA       35889.
##  5 WA       48659.
##  6 WA       32629.
##  7 NSW      49330.
##  8 NSW      35300.
##  9 NT       52602.
## 10 NT       41401.
## # … with 4,009 more rows</code></pre>
<p>Or you could use <code>-</code> (minus) to remove the <code>state</code> and <code>sa3_name</code> variables:<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb28-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>state, <span class="op">-</span>sa3_name)</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 4
##     year gender av_income workers
##    &lt;dbl&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
##  1  2011 Men       48760.   13737
##  2  2011 Women     38359.    4311
##  3  2011 Men       54343.   44904
##  4  2011 Women     35889.   14890
##  5  2011 Men       48659.   32915
##  6  2011 Women     32629.   10896
##  7  2011 Men       49330.   38139
##  8  2011 Women     35300.   12351
##  9  2011 Men       52602.   23663
## 10  2011 Women     41401.    7900
## # … with 4,009 more rows</code></pre>
<div id="selecting-groups-of-variables" class="section level3">
<h3><span class="header-section-number">8.4.1</span> Selecting groups of variables</h3>
<p>Sometimes it can be useful to keep or drop variables with names that have a certain characteristic; they begin with some text string, or end with one, or contain one, or have some other pattern altogether.</p>
<p>You can use patterns and <a href="https://tidyselect.r-lib.org/reference/select_helpers.html">‘select helpers’</a><a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>
from the Tidyverse to help deal with these sets of variables.</p>
<p>For example, if you want to keep just the SA3 and SA4 variables – ie the variables that start with <code>&quot;sa&quot;</code> – you could:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;sa&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 1
##    sa3_name      
##    &lt;chr&gt;         
##  1 Adelaide City 
##  2 Adelaide City 
##  3 Adelaide Hills
##  4 Adelaide Hills
##  5 Albany        
##  6 Albany        
##  7 Albury        
##  8 Albury        
##  9 Alice Springs 
## 10 Alice Springs 
## # … with 4,009 more rows</code></pre>
<p>Or, instead, if you wanted to keep just the variables that contain <code>&quot;er&quot;</code>, you could:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb32-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="kw">contains</span>(<span class="st">&quot;er&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 2
##    gender workers
##    &lt;chr&gt;    &lt;dbl&gt;
##  1 Men      13737
##  2 Women     4311
##  3 Men      44904
##  4 Women    14890
##  5 Men      32915
##  6 Women    10896
##  7 Men      38139
##  8 Women    12351
##  9 Men      23663
## 10 Women     7900
## # … with 4,009 more rows</code></pre>
<p>And if you wanted to keep <strong>both</strong> the <code>&quot;sa&quot;</code> variables and the <code>&quot;er&quot;</code> variables, you could:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb34-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(<span class="kw">starts_with</span>(<span class="st">&quot;sa&quot;</span>), <span class="kw">contains</span>(<span class="st">&quot;er&quot;</span>), )</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 3
##    sa3_name       gender workers
##    &lt;chr&gt;          &lt;chr&gt;    &lt;dbl&gt;
##  1 Adelaide City  Men      13737
##  2 Adelaide City  Women     4311
##  3 Adelaide Hills Men      44904
##  4 Adelaide Hills Women    14890
##  5 Albany         Men      32915
##  6 Albany         Women    10896
##  7 Albury         Men      38139
##  8 Albury         Women    12351
##  9 Alice Springs  Men      23663
## 10 Alice Springs  Women     7900
## # … with 4,009 more rows</code></pre>
<p>The full list of these handy select functions are provided with the <code>?tidyselect::select_helpers</code> documentation, listed below:</p>
<ul>
<li><code>starts_with()</code>: Starts with a prefix.</li>
<li><code>ends_with()</code>: Ends with a suffix.</li>
<li><code>contains()</code>: Contains a literal string.</li>
<li><code>matches()</code>: Matches a regular expression.</li>
<li><code>num_range()</code>: Matches a numerical range like x01, x02, x03.</li>
<li><code>one_of()</code>: Matches variable names in a character vector.</li>
<li><code>everything()</code>: Matches all variables.</li>
<li><code>last_col()</code>: Select last variable, possibly with an offset.</li>
</ul>
</div>
</div>
<div id="filter-with-filter" class="section level2">
<h2><span class="header-section-number">8.5</span> Filter with <code>filter()</code></h2>
<p>The <code>filter</code> function takes a dataset and <strong>keeps</strong> observations (rows) that meet the <strong>conditions</strong>.</p>
<p><code>filter</code> has one required first argument – the data – and then as many ‘conditions’ as you want to provide.</p>
<div id="conditions-logical-operations-true-or-false" class="section level3">
<h3><span class="header-section-number">8.5.1</span> Conditions; logical operations; <code>TRUE</code> or <code>FALSE</code></h3>
<p>The <strong>conditions</strong> are logical operations, meaning they are a statement that return either <code>TRUE</code> or <code>FALSE</code> in the computer’s mind.<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a></p>
<p>We know, for instance, that <code>1 + 2</code> does not equal <code>12</code>. Which means if we type <code>1 + 2 == 12</code> into the console it should give <code>FALSE</code>:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="dv">12</span></a></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<p>Or, we can see if <code>1 + 2</code> is equal <code>5</code> or <code>9</code> or <code>3</code> by providing a vector of those numbers:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" data-line-number="1"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">==</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">9</span>, <span class="dv">3</span>)</a></code></pre></div>
<pre><code>## [1] FALSE FALSE  TRUE</code></pre>
<p>This works for character strings, too:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" data-line-number="1"><span class="st">&quot;apple&quot;</span> <span class="op">==</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;orange&quot;</span>, <span class="st">&quot;apple&quot;</span>, <span class="dv">7</span>)</a></code></pre></div>
<pre><code>## [1] FALSE  TRUE FALSE</code></pre>
<p>A lot of what we do in ‘data science’ is based on these <code>TRUE</code> and <code>FALSE</code> conditions.</p>
</div>
<div id="filtering-data-with-filter" class="section level3">
<h3><span class="header-section-number">8.5.2</span> Filtering data with <code>filter</code></h3>
<p>Turning back to the <code>sa3_income</code> data, if you just wanted to see observations people in <code>NT</code>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(state <span class="op">==</span><span class="st"> &quot;NT&quot;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 123 x 6
##     year sa3_name                  state gender av_income workers
##    &lt;dbl&gt; &lt;chr&gt;                     &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
##  1  2011 Alice Springs             NT    Men       52602.   23663
##  2  2011 Alice Springs             NT    Women     41401.    7900
##  3  2011 Barkly                    NT    Men       50517.    2272
##  4  2011 Barkly                    NT    Women     41478.     698
##  5  2011 Christmas Island          NT    Men       69033.    1036
##  6  2011 Christmas Island          NT    Women     50373.     256
##  7  2011 Daly - Tiwi - West Arnhem NT    Men       51421.    3775
##  8  2011 Daly - Tiwi - West Arnhem NT    Women     39272.    1151
##  9  2011 Darwin City               NT    Men       57199.   24274
## 10  2011 Darwin City               NT    Women     44391.    7157
## # … with 113 more rows</code></pre>
<p>Or you might just want to look at high-income (<code>av_income &gt; 100,000</code>) areas from Victoria in 2015:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb44-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(state <span class="op">==</span><span class="st"> &quot;Vic&quot;</span>,</a>
<a class="sourceLine" id="cb44-3" data-line-number="3">         av_income <span class="op">&gt;</span><span class="st"> </span><span class="dv">75000</span>,</a>
<a class="sourceLine" id="cb44-4" data-line-number="4">         year <span class="op">==</span><span class="st"> </span><span class="dv">2015</span>)</a></code></pre></div>
<pre><code>## # A tibble: 1 x 6
##    year sa3_name state gender av_income workers
##   &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
## 1  2015 Bayside  Vic   Men       77175.   62460</code></pre>
<p>Each of the commas in the <code>filter</code> function represent an ‘and’ <code>&amp;</code>. So you can read the steps above as:</p>
<blockquote>
<p>take the <code>sa3_income</code> data and filter to keep only the observations that are from Victoria<code>,</code> and that have a average income above 100k<code>,</code> and are from the year 2015.</p>
</blockquote>
<p>Sometimes you might want to relax a little, keeping observations from one category <strong>or</strong> another. You can do this with the <strong>or</strong> symbol: <code>|</code><a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb46-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(state <span class="op">==</span><span class="st"> &quot;Vic&quot;</span> <span class="op">|</span><span class="st"> </span>state <span class="op">==</span><span class="st"> &quot;Tas&quot;</span>,</a>
<a class="sourceLine" id="cb46-3" data-line-number="3">         av_income <span class="op">&gt;</span><span class="st"> </span><span class="dv">100000</span>,</a>
<a class="sourceLine" id="cb46-4" data-line-number="4">         year <span class="op">==</span><span class="st"> </span><span class="dv">2015</span> <span class="op">|</span><span class="st"> </span>year <span class="op">==</span><span class="st"> </span><span class="dv">2016</span>)</a></code></pre></div>
<pre><code>## # A tibble: 0 x 6
## # … with 6 variables: year &lt;dbl&gt;, sa3_name &lt;chr&gt;, state &lt;chr&gt;,
## #   gender &lt;chr&gt;, av_income &lt;dbl&gt;, workers &lt;dbl&gt;</code></pre>
<p>Which reads:</p>
<blockquote>
<p>take the <code>sa3_income</code> data and filter to keep only the observations that are from Victoria OR NSW, and that have a average income above 100k, and are from the year 2015 OR 2016.</p>
</blockquote>
</div>
<div id="grouped-filtering-with-group_by" class="section level3">
<h3><span class="header-section-number">8.5.3</span> Grouped filtering with <code>group_by()</code></h3>
<p>The <code>group_by</code> function groups a dataset by given variables. This effectively generates one dataset per group within your main dataset. Any function you then apply – like <code>filter()</code> – will be applied to <em>each</em> of the grouped datasets.</p>
<p>For example, you could filter the <code>sa3_income</code> dataset to keep just the observation with the highest average income:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb48-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(av_income <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(av_income))</a></code></pre></div>
<pre><code>## # A tibble: 1 x 6
##    year sa3_name     state gender av_income workers
##   &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
## 1  2015 West Pilbara WA    Men      107844.   22928</code></pre>
<p>To keep the observations that have the highest average incomes <em>in each state</em>, you can <code>group_by</code> state, then <code>filter</code>:<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(state) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb50-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(av_income <span class="op">==</span><span class="st"> </span><span class="kw">max</span>(av_income))</a></code></pre></div>
<pre><code>## # A tibble: 8 x 6
## # Groups:   state [8]
##    year sa3_name                 state gender av_income workers
##   &lt;dbl&gt; &lt;chr&gt;                    &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
## 1  2013 Molonglo                 ACT   Men       92947.     227
## 2  2015 Gladstone                Qld   Men       97282.   48026
## 3  2015 Outback - North and East SA    Men       71791.   15849
## 4  2015 West Pilbara             WA    Men      107844.   22928
## 5  2016 Bayside                  Vic   Men       78624.   64541
## 6  2016 Christmas Island         NT    Men       84474.     621
## 7  2016 North Sydney - Mosman    NSW   Men       90668.   74702
## 8  2016 West Coast               Tas   Men       58116.   11117</code></pre>
<p>From the description of the tibble above, you can learn that your data has 8 unique groups of state:</p>
<p><code>## # Groups:       state [8]</code></p>
<p>Or you could keep the observations with the <em>lowest</em> average incomes in <em>each state and year</em>:<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(state, year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb52-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(av_income <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(av_income))</a></code></pre></div>
<pre><code>## # A tibble: 48 x 6
## # Groups:   state, year [48]
##     year sa3_name                  state gender av_income workers
##    &lt;dbl&gt; &lt;chr&gt;                     &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
##  1  2011 Belconnen                 ACT   Women     43235    22708
##  2  2011 Daly - Tiwi - West Arnhem NT    Women     39272.    1151
##  3  2011 Lower Murray              NSW   Women     30800.    2122
##  4  2011 Murray River - Swan Hill  Vic   Women     29889.    6930
##  5  2011 Noosa                     Qld   Women     31786.    6922
##  6  2011 North East                Tas   Women     31569.    6579
##  7  2011 Wheat Belt - South        WA    Women     31958.    3727
##  8  2011 Yorke Peninsula           SA    Women     28975.    3732
##  9  2012 Albany                    WA    Women     34853.   11183
## 10  2012 Daly - Tiwi - West Arnhem NT    Women     42567.    1100
## # … with 38 more rows</code></pre>
<p>The dataset remains grouped after your function(s). To explicitly ‘ungroup’ your data, add the <code>ungroup</code> function to your chain (the ‘Groups’ note has disappeared in the below):</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(state, year) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-3" data-line-number="3"><span class="st">  </span><span class="kw">filter</span>(av_income <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(av_income)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb54-4" data-line-number="4"><span class="st">  </span><span class="kw">ungroup</span>()</a></code></pre></div>
<pre><code>## # A tibble: 48 x 6
##     year sa3_name                  state gender av_income workers
##    &lt;dbl&gt; &lt;chr&gt;                     &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
##  1  2011 Belconnen                 ACT   Women     43235    22708
##  2  2011 Daly - Tiwi - West Arnhem NT    Women     39272.    1151
##  3  2011 Lower Murray              NSW   Women     30800.    2122
##  4  2011 Murray River - Swan Hill  Vic   Women     29889.    6930
##  5  2011 Noosa                     Qld   Women     31786.    6922
##  6  2011 North East                Tas   Women     31569.    6579
##  7  2011 Wheat Belt - South        WA    Women     31958.    3727
##  8  2011 Yorke Peninsula           SA    Women     28975.    3732
##  9  2012 Albany                    WA    Women     34853.   11183
## 10  2012 Daly - Tiwi - West Arnhem NT    Women     42567.    1100
## # … with 38 more rows</code></pre>
</div>
</div>
<div id="edit-and-add-new-variables-with-mutate" class="section level2">
<h2><span class="header-section-number">8.6</span> Edit and add new variables with <code>mutate()</code></h2>
<p>To add new variables to your dataset, use the <code>mutate</code> function. Like all <code>dplyr</code> verbs, the first argument to <code>mutate</code> is your data. Then define variables using a <code>new_variable_name = x</code> format, where <code>x</code> can be a single number or character string, or simple operation or function using current variables.</p>
<p>To add a new variable to the <code>sa3_income</code> dataset that shows the log the number of workers:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb56-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">log_workers =</span> <span class="kw">log</span>(workers))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 7
##     year sa3_name       state gender av_income workers log_workers
##    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;       &lt;dbl&gt;
##  1  2011 Adelaide City  SA    Men       48760.   13737        9.53
##  2  2011 Adelaide City  SA    Women     38359.    4311        8.37
##  3  2011 Adelaide Hills SA    Men       54343.   44904       10.7 
##  4  2011 Adelaide Hills SA    Women     35889.   14890        9.61
##  5  2011 Albany         WA    Men       48659.   32915       10.4 
##  6  2011 Albany         WA    Women     32629.   10896        9.30
##  7  2011 Albury         NSW   Men       49330.   38139       10.5 
##  8  2011 Albury         NSW   Women     35300.   12351        9.42
##  9  2011 Alice Springs  NT    Men       52602.   23663       10.1 
## 10  2011 Alice Springs  NT    Women     41401.    7900        8.97
## # … with 4,009 more rows</code></pre>
<p>To edit a variable, redefine it in <code>mutate</code>. For example, if you wanted to take the last two digits of year:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb58-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year =</span> <span class="kw">as.integer</span>(year <span class="op">-</span><span class="st"> </span><span class="dv">2000</span>))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 6
##     year sa3_name       state gender av_income workers
##    &lt;int&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
##  1    11 Adelaide City  SA    Men       48760.   13737
##  2    11 Adelaide City  SA    Women     38359.    4311
##  3    11 Adelaide Hills SA    Men       54343.   44904
##  4    11 Adelaide Hills SA    Women     35889.   14890
##  5    11 Albany         WA    Men       48659.   32915
##  6    11 Albany         WA    Women     32629.   10896
##  7    11 Albury         NSW   Men       49330.   38139
##  8    11 Albury         NSW   Women     35300.   12351
##  9    11 Alice Springs  NT    Men       52602.   23663
## 10    11 Alice Springs  NT    Women     41401.    7900
## # … with 4,009 more rows</code></pre>
<div id="using-if_else-or-case_when" class="section level3">
<h3><span class="header-section-number">8.6.1</span> Using <code>if_else()</code> or <code>case_when()</code></h3>
<p>Sometimes you want to create a new variable based on some sort of condition. Like, if the number of workers in an <code>sa3</code> is more than <code>2,000</code>, set the new <code>many_workers</code> variable to <code>TRUE</code>, and set it to <code>FALSE</code> otherwise.</p>
<p>This kind of operation can be thought of as <code>if_else</code>: <code>if</code> (some condition), do this, otherwise do that.</p>
<p>That’s what the <code>if_else()</code> function does. It takes three arguments: a condition, a value if that condition is true, and a value if that condition is false.</p>
<p>You can use the <code>if_else()</code> function when you are creating new variables in a <code>mutate</code> command:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb60-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">many_workers =</span> <span class="kw">if_else</span>(workers <span class="op">&gt;</span><span class="st"> </span><span class="dv">2000</span>, <span class="st">&quot;Many workers&quot;</span>, <span class="st">&quot;Not many workers&quot;</span>))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 7
##     year sa3_name       state gender av_income workers many_workers
##    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;       
##  1  2011 Adelaide City  SA    Men       48760.   13737 Many workers
##  2  2011 Adelaide City  SA    Women     38359.    4311 Many workers
##  3  2011 Adelaide Hills SA    Men       54343.   44904 Many workers
##  4  2011 Adelaide Hills SA    Women     35889.   14890 Many workers
##  5  2011 Albany         WA    Men       48659.   32915 Many workers
##  6  2011 Albany         WA    Women     32629.   10896 Many workers
##  7  2011 Albury         NSW   Men       49330.   38139 Many workers
##  8  2011 Albury         NSW   Women     35300.   12351 Many workers
##  9  2011 Alice Springs  NT    Men       52602.   23663 Many workers
## 10  2011 Alice Springs  NT    Women     41401.    7900 Many workers
## # … with 4,009 more rows</code></pre>
<p>Which reads:</p>
<blockquote>
<p>Take the <code>sa3_income</code> dataset, and then add a variable that says ‘Many workers’ if there are more than 2,000 workers, and ‘Not many workers’ if there are fewer-or-equal than 2,000 workers.</p>
</blockquote>
<p>With the <code>if_else</code> function, you take one conditional statement and return something based on that. But <strong>often</strong> you don’t want to be so binary; you want to do this if this is true, that if that is true, and the other if the other is true, etc.</p>
<p>This could be done by nesting <code>if_else</code> statements:</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb62-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">worker_group =</span> <span class="kw">if_else</span>(workers <span class="op">&gt;</span><span class="st"> </span><span class="dv">2000</span>, <span class="st">&quot;More than 2000 workers&quot;</span>, </a>
<a class="sourceLine" id="cb62-3" data-line-number="3">                                <span class="kw">if_else</span>(workers <span class="op">&gt;</span><span class="st"> </span><span class="dv">1000</span>, <span class="st">&quot;1000-2000 workers&quot;</span>,</a>
<a class="sourceLine" id="cb62-4" data-line-number="4">                                        <span class="kw">if_else</span>(workers <span class="op">&gt;</span><span class="st"> </span><span class="dv">500</span>, <span class="st">&quot;500-1000 workers&quot;</span>,</a>
<a class="sourceLine" id="cb62-5" data-line-number="5">                                                <span class="st">&quot;500 workers or less&quot;</span>))))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 7
##     year sa3_name       state gender av_income workers worker_group        
##    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;               
##  1  2011 Adelaide City  SA    Men       48760.   13737 More than 2000 work…
##  2  2011 Adelaide City  SA    Women     38359.    4311 More than 2000 work…
##  3  2011 Adelaide Hills SA    Men       54343.   44904 More than 2000 work…
##  4  2011 Adelaide Hills SA    Women     35889.   14890 More than 2000 work…
##  5  2011 Albany         WA    Men       48659.   32915 More than 2000 work…
##  6  2011 Albany         WA    Women     32629.   10896 More than 2000 work…
##  7  2011 Albury         NSW   Men       49330.   38139 More than 2000 work…
##  8  2011 Albury         NSW   Women     35300.   12351 More than 2000 work…
##  9  2011 Alice Springs  NT    Men       52602.   23663 More than 2000 work…
## 10  2011 Alice Springs  NT    Women     41401.    7900 More than 2000 work…
## # … with 4,009 more rows</code></pre>
<p>But that syntax can be a bit difficult to read. You can do this in a clearer way using <code>case_when</code>:</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb64-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">worker_group =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb64-3" data-line-number="3">    workers <span class="op">&gt;</span><span class="st"> </span><span class="dv">2000</span> <span class="op">~</span><span class="st"> &quot;More than 2000 workers&quot;</span>,</a>
<a class="sourceLine" id="cb64-4" data-line-number="4">    workers <span class="op">&gt;</span><span class="st"> </span><span class="dv">1000</span> <span class="op">~</span><span class="st"> &quot;More than 1000 workers&quot;</span>,</a>
<a class="sourceLine" id="cb64-5" data-line-number="5">    workers <span class="op">&gt;</span><span class="st">  </span><span class="dv">500</span> <span class="op">~</span><span class="st"> &quot;More than 500 workers&quot;</span>,</a>
<a class="sourceLine" id="cb64-6" data-line-number="6">    workers <span class="op">&lt;=</span><span class="st"> </span><span class="dv">500</span> <span class="op">~</span><span class="st"> &quot;500 or fewer workers&quot;</span></a>
<a class="sourceLine" id="cb64-7" data-line-number="7">  ))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 7
##     year sa3_name       state gender av_income workers worker_group        
##    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;               
##  1  2011 Adelaide City  SA    Men       48760.   13737 More than 2000 work…
##  2  2011 Adelaide City  SA    Women     38359.    4311 More than 2000 work…
##  3  2011 Adelaide Hills SA    Men       54343.   44904 More than 2000 work…
##  4  2011 Adelaide Hills SA    Women     35889.   14890 More than 2000 work…
##  5  2011 Albany         WA    Men       48659.   32915 More than 2000 work…
##  6  2011 Albany         WA    Women     32629.   10896 More than 2000 work…
##  7  2011 Albury         NSW   Men       49330.   38139 More than 2000 work…
##  8  2011 Albury         NSW   Women     35300.   12351 More than 2000 work…
##  9  2011 Alice Springs  NT    Men       52602.   23663 More than 2000 work…
## 10  2011 Alice Springs  NT    Women     41401.    7900 More than 2000 work…
## # … with 4,009 more rows</code></pre>
<p>The <code>case_when</code> function takes the first condition (LHS) and applies some value (RHS) if it is true. It then moves to the next condition, and so on. Once an observation has been classified – eg an observation has more than 2000 workers – it is ignored in proceeding conditions.</p>
<p>Ending a <code>case_when</code> statement with <code>TRUE ~ [some value]</code> is a catch all, and will apply the RHS <code>[some value]</code> to any observations that did not meet an explicit condition. For example, you could end the worker classification with:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb66-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">worker_group =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb66-3" data-line-number="3">    workers <span class="op">&gt;</span><span class="st"> </span><span class="dv">2000</span> <span class="op">~</span><span class="st"> &quot;More than 2000 workers&quot;</span>,</a>
<a class="sourceLine" id="cb66-4" data-line-number="4">    workers <span class="op">&gt;</span><span class="st"> </span><span class="dv">1000</span> <span class="op">~</span><span class="st"> &quot;More than 1000 workers&quot;</span>,</a>
<a class="sourceLine" id="cb66-5" data-line-number="5">    workers <span class="op">&gt;</span><span class="st">  </span><span class="dv">500</span> <span class="op">~</span><span class="st"> &quot;More than 500 workers&quot;</span>,</a>
<a class="sourceLine" id="cb66-6" data-line-number="6">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;500 or fewer workers&quot;</span></a>
<a class="sourceLine" id="cb66-7" data-line-number="7">  ))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 7
##     year sa3_name       state gender av_income workers worker_group        
##    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;               
##  1  2011 Adelaide City  SA    Men       48760.   13737 More than 2000 work…
##  2  2011 Adelaide City  SA    Women     38359.    4311 More than 2000 work…
##  3  2011 Adelaide Hills SA    Men       54343.   44904 More than 2000 work…
##  4  2011 Adelaide Hills SA    Women     35889.   14890 More than 2000 work…
##  5  2011 Albany         WA    Men       48659.   32915 More than 2000 work…
##  6  2011 Albany         WA    Women     32629.   10896 More than 2000 work…
##  7  2011 Albury         NSW   Men       49330.   38139 More than 2000 work…
##  8  2011 Albury         NSW   Women     35300.   12351 More than 2000 work…
##  9  2011 Alice Springs  NT    Men       52602.   23663 More than 2000 work…
## 10  2011 Alice Springs  NT    Women     41401.    7900 More than 2000 work…
## # … with 4,009 more rows</code></pre>
<p>Meaning, for any observation that did not have workers more than 2000 or more than 1000 or more than 500, assign the value <code>&quot;500 or fewer workers&quot;</code>.</p>
<p>Observations that do not meet a condition will be set to <code>NA</code>:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb68-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">worker_group =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb68-3" data-line-number="3">    workers <span class="op">&gt;</span><span class="st"> </span><span class="fl">10e6</span> <span class="op">~</span><span class="st"> &quot;More than 2000 workers&quot;</span></a>
<a class="sourceLine" id="cb68-4" data-line-number="4">  ))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 7
##     year sa3_name       state gender av_income workers worker_group
##    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;       
##  1  2011 Adelaide City  SA    Men       48760.   13737 &lt;NA&gt;        
##  2  2011 Adelaide City  SA    Women     38359.    4311 &lt;NA&gt;        
##  3  2011 Adelaide Hills SA    Men       54343.   44904 &lt;NA&gt;        
##  4  2011 Adelaide Hills SA    Women     35889.   14890 &lt;NA&gt;        
##  5  2011 Albany         WA    Men       48659.   32915 &lt;NA&gt;        
##  6  2011 Albany         WA    Women     32629.   10896 &lt;NA&gt;        
##  7  2011 Albury         NSW   Men       49330.   38139 &lt;NA&gt;        
##  8  2011 Albury         NSW   Women     35300.   12351 &lt;NA&gt;        
##  9  2011 Alice Springs  NT    Men       52602.   23663 &lt;NA&gt;        
## 10  2011 Alice Springs  NT    Women     41401.    7900 &lt;NA&gt;        
## # … with 4,009 more rows</code></pre>
<p>Like any <code>if</code> or <code>if_else</code>, you can provide more than one condition to your conditional statement:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb70-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">women_group =</span> <span class="kw">case_when</span>(</a>
<a class="sourceLine" id="cb70-3" data-line-number="3">    gender <span class="op">==</span><span class="st"> &quot;Women&quot;</span> <span class="op">&amp;</span><span class="st"> </span>workers <span class="op">&gt;</span><span class="st"> </span><span class="dv">2000</span> <span class="op">~</span><span class="st"> &quot;More than 2000 women&quot;</span>,</a>
<a class="sourceLine" id="cb70-4" data-line-number="4">    gender <span class="op">==</span><span class="st"> &quot;Women&quot;</span> <span class="op">&amp;</span><span class="st"> </span>workers <span class="op">&gt;</span><span class="st"> </span><span class="dv">1000</span> <span class="op">~</span><span class="st"> &quot;More than 1000 women&quot;</span>,</a>
<a class="sourceLine" id="cb70-5" data-line-number="5">    gender <span class="op">==</span><span class="st"> &quot;Women&quot;</span> <span class="op">&amp;</span><span class="st"> </span>workers <span class="op">&gt;</span><span class="st">  </span><span class="dv">500</span> <span class="op">~</span><span class="st"> &quot;More than 500 women&quot;</span>,</a>
<a class="sourceLine" id="cb70-6" data-line-number="6">    gender <span class="op">==</span><span class="st"> &quot;Women&quot;</span>                  <span class="op">~</span><span class="st"> &quot;500 or fewer women&quot;</span>,</a>
<a class="sourceLine" id="cb70-7" data-line-number="7">    <span class="ot">TRUE</span> <span class="op">~</span><span class="st"> &quot;Men&quot;</span></a>
<a class="sourceLine" id="cb70-8" data-line-number="8">  ))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 7
##     year sa3_name       state gender av_income workers women_group         
##    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt;               
##  1  2011 Adelaide City  SA    Men       48760.   13737 Men                 
##  2  2011 Adelaide City  SA    Women     38359.    4311 More than 2000 women
##  3  2011 Adelaide Hills SA    Men       54343.   44904 Men                 
##  4  2011 Adelaide Hills SA    Women     35889.   14890 More than 2000 women
##  5  2011 Albany         WA    Men       48659.   32915 Men                 
##  6  2011 Albany         WA    Women     32629.   10896 More than 2000 women
##  7  2011 Albury         NSW   Men       49330.   38139 Men                 
##  8  2011 Albury         NSW   Women     35300.   12351 More than 2000 women
##  9  2011 Alice Springs  NT    Men       52602.   23663 Men                 
## 10  2011 Alice Springs  NT    Women     41401.    7900 More than 2000 women
## # … with 4,009 more rows</code></pre>
</div>
<div id="grouped-mutates-with-group_by" class="section level3">
<h3><span class="header-section-number">8.6.2</span> Grouped mutates with <code>group_by()</code></h3>
<p>Like filtering, you can add or edit variables on grouped data. For example, you could get the average number of workers in each SA3 over the 6 years:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb72-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(sa3_name, gender) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb72-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">av_workers =</span> <span class="kw">mean</span>(workers))</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 7
## # Groups:   sa3_name, gender [672]
##     year sa3_name       state gender av_income workers av_workers
##    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
##  1  2011 Adelaide City  SA    Men       48760.   13737     14072.
##  2  2011 Adelaide City  SA    Women     38359.    4311      4315.
##  3  2011 Adelaide Hills SA    Men       54343.   44904     46244 
##  4  2011 Adelaide Hills SA    Women     35889.   14890     15295.
##  5  2011 Albany         WA    Men       48659.   32915     34964.
##  6  2011 Albany         WA    Women     32629.   10896     11416 
##  7  2011 Albury         NSW   Men       49330.   38139     38815.
##  8  2011 Albury         NSW   Women     35300.   12351     12549.
##  9  2011 Alice Springs  NT    Men       52602.   23663     23854.
## 10  2011 Alice Springs  NT    Women     41401.    7900      7993.
## # … with 4,009 more rows</code></pre>
<p>Above, the <code>mean()</code> function is applied separately to each unique group of <code>sa3_name</code> and <code>gender</code>, taking one average for women in Queanbeyan, one average for men in Queanbeyan, and so on.</p>
<p>Grouping a dataset does not prohibit operations that don’t utilise the grouping. For example, you could get each year’s workers relative to the SA3/gender average in the same call to <code>mutate</code>:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb74-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(sa3_name, gender) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb74-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">av_workers =</span> <span class="kw">mean</span>(workers),</a>
<a class="sourceLine" id="cb74-4" data-line-number="4">         <span class="dt">worker_diff =</span> workers <span class="op">/</span><span class="st"> </span>av_workers)</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 8
## # Groups:   sa3_name, gender [672]
##     year sa3_name     state gender av_income workers av_workers worker_diff
##    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;
##  1  2011 Adelaide Ci… SA    Men       48760.   13737     14072.       0.976
##  2  2011 Adelaide Ci… SA    Women     38359.    4311      4315.       0.999
##  3  2011 Adelaide Hi… SA    Men       54343.   44904     46244        0.971
##  4  2011 Adelaide Hi… SA    Women     35889.   14890     15295.       0.974
##  5  2011 Albany       WA    Men       48659.   32915     34964.       0.941
##  6  2011 Albany       WA    Women     32629.   10896     11416        0.954
##  7  2011 Albury       NSW   Men       49330.   38139     38815.       0.983
##  8  2011 Albury       NSW   Women     35300.   12351     12549.       0.984
##  9  2011 Alice Sprin… NT    Men       52602.   23663     23854.       0.992
## 10  2011 Alice Sprin… NT    Women     41401.    7900      7993.       0.988
## # … with 4,009 more rows</code></pre>
<p>See that the data remains grouped after the <code>mutate</code>. You can explicitly <code>ungroup()</code> afterwards:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb76-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(sa3_name, gender) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb76-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">av_workers =</span> <span class="kw">mean</span>(workers),</a>
<a class="sourceLine" id="cb76-4" data-line-number="4">         <span class="dt">worker_diff =</span> workers <span class="op">/</span><span class="st"> </span>av_workers) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb76-5" data-line-number="5"><span class="st">  </span><span class="kw">ungroup</span>()</a></code></pre></div>
<pre><code>## # A tibble: 4,019 x 8
##     year sa3_name     state gender av_income workers av_workers worker_diff
##    &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;
##  1  2011 Adelaide Ci… SA    Men       48760.   13737     14072.       0.976
##  2  2011 Adelaide Ci… SA    Women     38359.    4311      4315.       0.999
##  3  2011 Adelaide Hi… SA    Men       54343.   44904     46244        0.971
##  4  2011 Adelaide Hi… SA    Women     35889.   14890     15295.       0.974
##  5  2011 Albany       WA    Men       48659.   32915     34964.       0.941
##  6  2011 Albany       WA    Women     32629.   10896     11416        0.954
##  7  2011 Albury       NSW   Men       49330.   38139     38815.       0.983
##  8  2011 Albury       NSW   Women     35300.   12351     12549.       0.984
##  9  2011 Alice Sprin… NT    Men       52602.   23663     23854.       0.992
## 10  2011 Alice Sprin… NT    Women     41401.    7900      7993.       0.988
## # … with 4,009 more rows</code></pre>
</div>
</div>
<div id="summarise-data-with-summarise" class="section level2">
<h2><span class="header-section-number">8.7</span> Summarise data with <code>summarise()</code></h2>
<p>Summarising is a useful way to assess and present data. The <code>summarise</code> function collapses your data down into a single row, performing the operation(s) you provide:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb78-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb78-2" data-line-number="2"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_income =</span> <span class="kw">mean</span>(av_income),</a>
<a class="sourceLine" id="cb78-3" data-line-number="3">            <span class="dt">total_workers =</span> <span class="kw">sum</span>(workers))  <span class="co"># this is a silly statistic</span></a></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   mean_income total_workers
##         &lt;dbl&gt;         &lt;dbl&gt;
## 1      50272.     117002608</code></pre>
<div id="grouped-summaries-with-group_by" class="section level3">
<h3><span class="header-section-number">8.7.1</span> Grouped summaries with <code>group_by()</code></h3>
</div>
</div>
<div id="arrange-with-arrange" class="section level2">
<h2><span class="header-section-number">8.8</span> Arrange with <code>arrange()</code></h2>
<p>Sorting data in one way or another is useful because XXXX.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb80-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2016</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb80-3" data-line-number="3"><span class="st">  </span><span class="kw">arrange</span>(workers)</a></code></pre></div>
<pre><code>## # A tibble: 670 x 6
##     year sa3_name                  state gender av_income workers
##    &lt;dbl&gt; &lt;chr&gt;                     &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
##  1  2016 Lord Howe Island          NSW   Women     37944       74
##  2  2016 Urriarra - Namadgi        ACT   Women     86672.      90
##  3  2016 Christmas Island          NT    Women     57640      141
##  4  2016 Canberra East             ACT   Women     52091.     182
##  5  2016 Lord Howe Island          NSW   Men       40292      255
##  6  2016 Urriarra - Namadgi        ACT   Men       86747.     296
##  7  2016 Christmas Island          NT    Men       84474.     621
##  8  2016 Barkly                    NT    Women     52552.     704
##  9  2016 Canberra East             ACT   Men       58035.     711
## 10  2016 Daly - Tiwi - West Arnhem NT    Women     50096.    1075
## # … with 660 more rows</code></pre>
<p>Or:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" data-line-number="1">sa3_income <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb82-2" data-line-number="2"><span class="st">  </span><span class="kw">filter</span>(year <span class="op">==</span><span class="st"> </span><span class="dv">2016</span>) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb82-3" data-line-number="3"><span class="st">  </span><span class="kw">arrange</span>(<span class="op">-</span>workers)</a></code></pre></div>
<pre><code>## # A tibble: 670 x 6
##     year sa3_name            state gender av_income workers
##    &lt;dbl&gt; &lt;chr&gt;               &lt;chr&gt; &lt;chr&gt;      &lt;dbl&gt;   &lt;dbl&gt;
##  1  2016 Sydney Inner City   NSW   Men       62770.  190906
##  2  2016 Wyndham             Vic   Men       60741.  150321
##  3  2016 Stirling            WA    Men       71653.  141758
##  4  2016 Whittlesea - Wallan Vic   Men       58728.  140106
##  5  2016 Wanneroo            WA    Men       71374.  130464
##  6  2016 Townsville          Qld   Men       65773.  129587
##  7  2016 Geelong             Vic   Men       61040.  121606
##  8  2016 Joondalup           WA    Men       76514.  120019
##  9  2016 Brimbank            Vic   Men       54252   119954
## 10  2016 Dandenong           Vic   Men       51872.  116742
## # … with 660 more rows</code></pre>
</div>
<div id="joining-datasets-with-_join" class="section level2">
<h2><span class="header-section-number">8.9</span> Joining datasets with <code>*_join()</code></h2>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>From <a href="https://www.abs.gov.au/AUSSTATS/abs@.nsf/DetailsPage/6524.0.55.0022011-2016?OpenDocument">ABS Employee income by occupation and sex, 2010-11 to 2016-16</a><a href="data-transformation.html#fnref1" class="footnote-back">↩</a></p></li>
<li id="fn2"><p>XXX cannot remember the source for this example; probably Hadley? Jenny Bryan? Maybe somenone else?<a href="data-transformation.html#fnref2" class="footnote-back">↩</a></p></li>
<li id="fn3"><p>‘pass’ can also be used to mean ‘pipe’.<a href="data-transformation.html#fnref3" class="footnote-back">↩</a></p></li>
<li id="fn4"><p>This is the same as <strong>keeping everything except</strong> the <code>state</code> and <code>sa3_name</code> variables.<a href="data-transformation.html#fnref4" class="footnote-back">↩</a></p></li>
<li id="fn5"><p>Explained in useful detail by the Tidyverse people at <a href="https://tidyselect.r-lib.org/reference/select_helpers.html" class="uri">https://tidyselect.r-lib.org/reference/select_helpers.html</a><a href="data-transformation.html#fnref5" class="footnote-back">↩</a></p></li>
<li id="fn6"><p>Computers’ mind, more likely.<a href="data-transformation.html#fnref6" class="footnote-back">↩</a></p></li>
<li id="fn7"><p>On the keyboard: <code>shift</code> + <code>backslash</code><a href="data-transformation.html#fnref7" class="footnote-back">↩</a></p></li>
<li id="fn8"><p>Wow they are all men!<a href="data-transformation.html#fnref8" class="footnote-back">↩</a></p></li>
<li id="fn9"><p>Wow they are all women!<a href="data-transformation.html#fnref9" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="different-data-types.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["r-at-grattan.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
