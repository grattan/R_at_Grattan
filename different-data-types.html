<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Different data types | Using R at Grattan Institute</title>
  <meta name="description" content="How to use R at Grattan good" />
  <meta name="generator" content="bookdown 0.23.1 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Different data types | Using R at Grattan Institute" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="How to use R at Grattan good" />
  <meta name="github-repo" content="grattan/R_at_Grattan" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Different data types | Using R at Grattan Institute" />
  
  <meta name="twitter:description" content="How to use R at Grattan good" />
  

<meta name="author" content="Matt Cowgill, Will Mackey, and James Ha" />


<meta name="date" content="2021-08-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="reading-data.html"/>
<link rel="next" href="data-transformation-with-dplyr.html"/>
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Using R at Grattan Institute</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome!</a></li>
<li class="part"><span><b>I What is R and why do we use it?</b></span></li>
<li class="chapter" data-level="1" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>1</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#what-is-r"><i class="fa fa-check"></i><b>1.1</b> What is R?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#what-is-rstudio"><i class="fa fa-check"></i><b>1.2</b> What is RStudio?</a></li>
<li class="chapter" data-level="1.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#installing-r-and-rstudio"><i class="fa fa-check"></i><b>1.3</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#learning-more-about-r"><i class="fa fa-check"></i><b>1.4</b> Learning more about R</a></li>
<li class="chapter" data-level="1.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r_at_grattan"><i class="fa fa-check"></i><b>1.5</b> <code>#r_at_grattan</code></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="why-use-r.html"><a href="why-use-r.html"><i class="fa fa-check"></i><b>2</b> Why use R?</a>
<ul>
<li class="chapter" data-level="2.1" data-path="why-use-r.html"><a href="why-use-r.html#why-script"><i class="fa fa-check"></i><b>2.1</b> Why use script-based software?</a></li>
<li class="chapter" data-level="2.2" data-path="why-use-r.html"><a href="why-use-r.html#why-R"><i class="fa fa-check"></i><b>2.2</b> Why use R specifically?</a></li>
</ul></li>
<li class="part"><span><b>II Using R the Grattan way</b></span></li>
<li class="chapter" data-level="3" data-path="organising-projects.html"><a href="organising-projects.html"><i class="fa fa-check"></i><b>3</b> Organising an R project at Grattan</a>
<ul>
<li class="chapter" data-level="3.1" data-path="organising-projects.html"><a href="organising-projects.html#rproj"><i class="fa fa-check"></i><b>3.1</b> Use RStudio projects, not <code>setwd()</code></a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="organising-projects.html"><a href="organising-projects.html#how-to-create-a-project"><i class="fa fa-check"></i><b>3.1.1</b> How to create a project</a></li>
<li class="chapter" data-level="3.1.2" data-path="organising-projects.html"><a href="organising-projects.html#opening-a-project"><i class="fa fa-check"></i><b>3.1.2</b> Opening a project</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="organising-projects.html"><a href="organising-projects.html#use-relative-filepaths"><i class="fa fa-check"></i><b>3.2</b> Use relative filepaths</a></li>
<li class="chapter" data-level="3.3" data-path="organising-projects.html"><a href="organising-projects.html#keep-your-stuff-together"><i class="fa fa-check"></i><b>3.3</b> Keep your stuff together</a></li>
<li class="chapter" data-level="3.4" data-path="organising-projects.html"><a href="organising-projects.html#manageable"><i class="fa fa-check"></i><b>3.4</b> Keep your scripts manageable</a></li>
<li class="chapter" data-level="3.5" data-path="organising-projects.html"><a href="organising-projects.html#make-your-filenames-readable-by-both-machines-and-humans"><i class="fa fa-check"></i><b>3.5</b> Make your filenames readable by both machines and humans</a></li>
<li class="chapter" data-level="3.6" data-path="organising-projects.html"><a href="organising-projects.html#README"><i class="fa fa-check"></i><b>3.6</b> Include a README file</a></li>
<li class="chapter" data-level="3.7" data-path="organising-projects.html"><a href="organising-projects.html#clean-workspace"><i class="fa fa-check"></i><b>3.7</b> Keep your workspace clean</a></li>
<li class="chapter" data-level="3.8" data-path="organising-projects.html"><a href="organising-projects.html#quick-guide"><i class="fa fa-check"></i><b>3.8</b> Quick guide to starting a project</a></li>
<li class="chapter" data-level="3.9" data-path="organising-projects.html"><a href="organising-projects.html#analysis-template"><i class="fa fa-check"></i><b>3.9</b> Using the <code>grattan-analysis-template</code></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="coding-style.html"><a href="coding-style.html"><i class="fa fa-check"></i><b>4</b> Grattan coding style</a>
<ul>
<li class="chapter" data-level="4.1" data-path="coding-style.html"><a href="coding-style.html#load-packages-first"><i class="fa fa-check"></i><b>4.1</b> Load packages first</a></li>
<li class="chapter" data-level="4.2" data-path="coding-style.html"><a href="coding-style.html#script-preamble"><i class="fa fa-check"></i><b>4.2</b> Script preamble</a></li>
<li class="chapter" data-level="4.3" data-path="coding-style.html"><a href="coding-style.html#use-comments"><i class="fa fa-check"></i><b>4.3</b> Use comments</a></li>
<li class="chapter" data-level="4.4" data-path="coding-style.html"><a href="coding-style.html#breaking-your-script-into-chunks"><i class="fa fa-check"></i><b>4.4</b> Breaking your script into chunks</a></li>
<li class="chapter" data-level="4.5" data-path="coding-style.html"><a href="coding-style.html#assigning-values-to-objects"><i class="fa fa-check"></i><b>4.5</b> Assigning values to objects</a></li>
<li class="chapter" data-level="4.6" data-path="coding-style.html"><a href="coding-style.html#naming-objects-and-variables"><i class="fa fa-check"></i><b>4.6</b> Naming objects and variables</a></li>
<li class="chapter" data-level="4.7" data-path="coding-style.html"><a href="coding-style.html#spacing"><i class="fa fa-check"></i><b>4.7</b> Spacing</a>
<ul>
<li class="chapter" data-level="4.7.1" data-path="coding-style.html"><a href="coding-style.html#assign-and-equals"><i class="fa fa-check"></i><b>4.7.1</b> Assign and equals</a></li>
<li class="chapter" data-level="4.7.2" data-path="coding-style.html"><a href="coding-style.html#commas"><i class="fa fa-check"></i><b>4.7.2</b> Commas</a></li>
<li class="chapter" data-level="4.7.3" data-path="coding-style.html"><a href="coding-style.html#parentheses"><i class="fa fa-check"></i><b>4.7.3</b> Parentheses</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="coding-style.html"><a href="coding-style.html#short-lines-line-indentation-and-the-pipe"><i class="fa fa-check"></i><b>4.8</b> Short lines, line indentation and the pipe <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.9" data-path="coding-style.html"><a href="coding-style.html#omit-needless-code"><i class="fa fa-check"></i><b>4.9</b> Omit needless code</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>5</b> What are packages?</a>
<ul>
<li class="chapter" data-level="5.1" data-path="packages.html"><a href="packages.html#install-packages"><i class="fa fa-check"></i><b>5.1</b> How to install packages</a></li>
<li class="chapter" data-level="5.2" data-path="packages.html"><a href="packages.html#install-grattan-packages"><i class="fa fa-check"></i><b>5.2</b> Get set up: install packages for Grattan</a></li>
<li class="chapter" data-level="5.3" data-path="packages.html"><a href="packages.html#using-packages"><i class="fa fa-check"></i><b>5.3</b> Using packages</a></li>
<li class="chapter" data-level="5.4" data-path="packages.html"><a href="packages.html#upgrading-packages"><i class="fa fa-check"></i><b>5.4</b> Upgrading packages</a></li>
<li class="chapter" data-level="5.5" data-path="packages.html"><a href="packages.html#downgrading-packages"><i class="fa fa-check"></i><b>5.5</b> Downgrading packages</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="packages-commonly-used-at-grattan.html"><a href="packages-commonly-used-at-grattan.html"><i class="fa fa-check"></i><b>6</b> Packages commonly used at Grattan</a>
<ul>
<li class="chapter" data-level="6.1" data-path="packages-commonly-used-at-grattan.html"><a href="packages-commonly-used-at-grattan.html#tidyverse"><i class="fa fa-check"></i><b>6.1</b> The tidyverse!</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="packages-commonly-used-at-grattan.html"><a href="packages-commonly-used-at-grattan.html#why-do-we-use-the-tidyverse"><i class="fa fa-check"></i><b>6.1.1</b> Why do we use the tidyverse?</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="packages-commonly-used-at-grattan.html"><a href="packages-commonly-used-at-grattan.html#grattan-specific-packages"><i class="fa fa-check"></i><b>6.2</b> Grattan-specific packages</a></li>
<li class="chapter" data-level="6.3" data-path="packages-commonly-used-at-grattan.html"><a href="packages-commonly-used-at-grattan.html#other-commonly-used-packages"><i class="fa fa-check"></i><b>6.3</b> Other commonly-used packages</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="getting-help-with-r.html"><a href="getting-help-with-r.html"><i class="fa fa-check"></i><b>7</b> Getting help with R</a>
<ul>
<li class="chapter" data-level="7.1" data-path="getting-help-with-r.html"><a href="getting-help-with-r.html#getting-help-with-r-problems-at-grattan"><i class="fa fa-check"></i><b>7.1</b> Getting help with R problems at Grattan</a></li>
<li class="chapter" data-level="7.2" data-path="getting-help-with-r.html"><a href="getting-help-with-r.html#getting-help-with-r-problems-in-general"><i class="fa fa-check"></i><b>7.2</b> Getting help with R problems in general</a></li>
<li class="chapter" data-level="7.3" data-path="getting-help-with-r.html"><a href="getting-help-with-r.html#resources-for-learning-r"><i class="fa fa-check"></i><b>7.3</b> Resources for learning R</a></li>
</ul></li>
<li class="part"><span><b>III Load, manipulate and visualise data</b></span></li>
<li class="chapter" data-level="8" data-path="reading-data.html"><a href="reading-data.html"><i class="fa fa-check"></i><b>8</b> Reading data</a>
<ul>
<li class="chapter" data-level="8.1" data-path="reading-data.html"><a href="reading-data.html#importing-data"><i class="fa fa-check"></i><b>8.1</b> Importing data</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="reading-data.html"><a href="reading-data.html#reading-csv-files"><i class="fa fa-check"></i><b>8.1.1</b> Reading CSV files</a></li>
<li class="chapter" data-level="8.1.2" data-path="reading-data.html"><a href="reading-data.html#read_microdata"><i class="fa fa-check"></i><b>8.1.2</b> <code>grattandata::read_microdata()</code></a></li>
<li class="chapter" data-level="8.1.3" data-path="reading-data.html"><a href="reading-data.html#readxlread_excel"><i class="fa fa-check"></i><b>8.1.3</b> <code>readxl::read_excel()</code></a></li>
<li class="chapter" data-level="8.1.4" data-path="reading-data.html"><a href="reading-data.html#rio"><i class="fa fa-check"></i><b>8.1.4</b> <code>rio</code></a></li>
<li class="chapter" data-level="8.1.5" data-path="reading-data.html"><a href="reading-data.html#readabs"><i class="fa fa-check"></i><b>8.1.5</b> <code>readabs</code></a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="reading-data.html"><a href="reading-data.html#reading-common-files"><i class="fa fa-check"></i><b>8.2</b> Reading common files:</a></li>
<li class="chapter" data-level="8.3" data-path="reading-data.html"><a href="reading-data.html#appropriately-renaming-variables"><i class="fa fa-check"></i><b>8.3</b> Appropriately renaming variables</a></li>
<li class="chapter" data-level="8.4" data-path="reading-data.html"><a href="reading-data.html#getting-to-tidy-data"><i class="fa fa-check"></i><b>8.4</b> Getting to tidy data</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="different-data-types.html"><a href="different-data-types.html"><i class="fa fa-check"></i><b>9</b> Different data types</a>
<ul>
<li class="chapter" data-level="9.1" data-path="different-data-types.html"><a href="different-data-types.html#set-up-and-packages"><i class="fa fa-check"></i><b>9.1</b> Set-up and packages</a></li>
<li class="chapter" data-level="9.2" data-path="different-data-types.html"><a href="different-data-types.html#why-data-types-matter"><i class="fa fa-check"></i><b>9.2</b> Why data types matter</a></li>
<li class="chapter" data-level="9.3" data-path="different-data-types.html"><a href="different-data-types.html#checking-and-changing-data-types"><i class="fa fa-check"></i><b>9.3</b> Checking and changing data types</a></li>
<li class="chapter" data-level="9.4" data-path="different-data-types.html"><a href="different-data-types.html#checking-and-changing-data-types-in-vectors-and-tibbles"><i class="fa fa-check"></i><b>9.4</b> Checking and changing data types in vectors and <code>tibbles</code></a></li>
<li class="chapter" data-level="9.5" data-path="different-data-types.html"><a href="different-data-types.html#asserting-data-types-when-importing-data"><i class="fa fa-check"></i><b>9.5</b> Asserting data types when importing data</a></li>
<li class="chapter" data-level="9.6" data-path="different-data-types.html"><a href="different-data-types.html#changing-the-data-types-of-lots-of-variables"><i class="fa fa-check"></i><b>9.6</b> Changing the data types of lots of variables</a></li>
<li class="chapter" data-level="9.7" data-path="different-data-types.html"><a href="different-data-types.html#using-character-vectors"><i class="fa fa-check"></i><b>9.7</b> Using character vectors</a></li>
<li class="chapter" data-level="9.8" data-path="different-data-types.html"><a href="different-data-types.html#using-dates-with-lubridate"><i class="fa fa-check"></i><b>9.8</b> Using dates with <code>lubridate::</code></a></li>
<li class="chapter" data-level="9.9" data-path="different-data-types.html"><a href="different-data-types.html#strings-with-stringr"><i class="fa fa-check"></i><b>9.9</b> Strings with <code>stringr::</code></a></li>
<li class="chapter" data-level="9.10" data-path="different-data-types.html"><a href="different-data-types.html#factors-with-forcats"><i class="fa fa-check"></i><b>9.10</b> Factors with <code>forcats::</code></a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html"><i class="fa fa-check"></i><b>10</b> Data transformation with <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#set-up"><i class="fa fa-check"></i><b>10.1</b> Set up</a></li>
<li class="chapter" data-level="10.2" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#the-pipe"><i class="fa fa-check"></i><b>10.2</b> The pipe: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="10.3" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#select-variables-with-select"><i class="fa fa-check"></i><b>10.3</b> Select variables with <code>select()</code></a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#selecting-groups-of-variables"><i class="fa fa-check"></i><b>10.3.1</b> Selecting groups of variables</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#filter-with-filter"><i class="fa fa-check"></i><b>10.4</b> Filter with <code>filter()</code></a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#conditions-logical-operations-true-or-false"><i class="fa fa-check"></i><b>10.4.1</b> Conditions; logical operations; <code>TRUE</code> or <code>FALSE</code></a></li>
<li class="chapter" data-level="10.4.2" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#filtering-data-with-filter"><i class="fa fa-check"></i><b>10.4.2</b> Filtering data with <code>filter</code></a></li>
<li class="chapter" data-level="10.4.3" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#grouped-filtering-with-group_by"><i class="fa fa-check"></i><b>10.4.3</b> Grouped filtering with <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#edit-and-add-new-variables-with-mutate"><i class="fa fa-check"></i><b>10.5</b> Edit and add new variables with <code>mutate()</code></a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#using-if_else-or-case_when"><i class="fa fa-check"></i><b>10.5.1</b> Using <code>if_else()</code> or <code>case_when()</code></a></li>
<li class="chapter" data-level="10.5.2" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#grouped-mutates-with-group_by"><i class="fa fa-check"></i><b>10.5.2</b> Grouped mutates with <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#summarise-data-with-summarise"><i class="fa fa-check"></i><b>10.6</b> Summarise data with <code>summarise()</code></a>
<ul>
<li class="chapter" data-level="10.6.1" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#grouped-summaries-with-group_by"><i class="fa fa-check"></i><b>10.6.1</b> Grouped summaries with <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#arrange-with-arrange"><i class="fa fa-check"></i><b>10.7</b> Arrange with <code>arrange()</code></a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#lead-and-lag-functions-with-arrange"><i class="fa fa-check"></i><b>10.7.1</b> <code>lead</code> and <code>lag</code> functions with <code>arrange</code></a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#putting-it-all-together"><i class="fa fa-check"></i><b>10.8</b> Putting it all together</a></li>
<li class="chapter" data-level="10.9" data-path="data-transformation-with-dplyr.html"><a href="data-transformation-with-dplyr.html#joining-datasets-with-left_join"><i class="fa fa-check"></i><b>10.9</b> Joining datasets with <code>left_join()</code></a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="analysis.html"><a href="analysis.html"><i class="fa fa-check"></i><b>11</b> Analysis</a></li>
<li class="chapter" data-level="12" data-path="data-visualisation.html"><a href="data-visualisation.html"><i class="fa fa-check"></i><b>12</b> Data Visualisation</a>
<ul>
<li class="chapter" data-level="12.1" data-path="data-visualisation.html"><a href="data-visualisation.html#introduction-to-data-visualisation"><i class="fa fa-check"></i><b>12.1</b> Introduction to data visualisation</a></li>
<li class="chapter" data-level="12.2" data-path="data-visualisation.html"><a href="data-visualisation.html#set-up-and-packages-1"><i class="fa fa-check"></i><b>12.2</b> Set-up and packages</a></li>
<li class="chapter" data-level="12.3" data-path="data-visualisation.html"><a href="data-visualisation.html#concepts"><i class="fa fa-check"></i><b>12.3</b> Concepts</a></li>
<li class="chapter" data-level="12.4" data-path="data-visualisation.html"><a href="data-visualisation.html#exploratory-data-visualisation"><i class="fa fa-check"></i><b>12.4</b> Exploratory data visualisation</a></li>
<li class="chapter" data-level="12.5" data-path="data-visualisation.html"><a href="data-visualisation.html#making-grattan-y-charts"><i class="fa fa-check"></i><b>12.5</b> Making Grattan-y charts</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="data-visualisation.html"><a href="data-visualisation.html#making-grattan-charts"><i class="fa fa-check"></i><b>12.5.1</b> Making Grattan charts</a></li>
<li class="chapter" data-level="12.5.2" data-path="data-visualisation.html"><a href="data-visualisation.html#saving-grattan-charts"><i class="fa fa-check"></i><b>12.5.2</b> Saving Grattan charts</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="data-visualisation.html"><a href="data-visualisation.html#adding-labels"><i class="fa fa-check"></i><b>12.6</b> Adding labels</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="chart-cookbook.html"><a href="chart-cookbook.html"><i class="fa fa-check"></i><b>13</b> Chart cookbook</a>
<ul>
<li class="chapter" data-level="13.1" data-path="chart-cookbook.html"><a href="chart-cookbook.html#set-up-1"><i class="fa fa-check"></i><b>13.1</b> Set up</a></li>
<li class="chapter" data-level="13.2" data-path="chart-cookbook.html"><a href="chart-cookbook.html#bar-charts"><i class="fa fa-check"></i><b>13.2</b> Bar charts</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="chart-cookbook.html"><a href="chart-cookbook.html#simple-bar-plot"><i class="fa fa-check"></i><b>13.2.1</b> Simple bar plot</a></li>
<li class="chapter" data-level="13.2.2" data-path="chart-cookbook.html"><a href="chart-cookbook.html#bar-multi"><i class="fa fa-check"></i><b>13.2.2</b> Bar plot with multiple series</a></li>
<li class="chapter" data-level="13.2.3" data-path="chart-cookbook.html"><a href="chart-cookbook.html#facet-bar"><i class="fa fa-check"></i><b>13.2.3</b> Facetted bar charts</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="chart-cookbook.html"><a href="chart-cookbook.html#line-charts"><i class="fa fa-check"></i><b>13.3</b> Line charts</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="chart-cookbook.html"><a href="chart-cookbook.html#simple-line-chart"><i class="fa fa-check"></i><b>13.3.1</b> Simple line chart</a></li>
<li class="chapter" data-level="13.3.2" data-path="chart-cookbook.html"><a href="chart-cookbook.html#line-chart-with-multiple-series"><i class="fa fa-check"></i><b>13.3.2</b> Line chart with multiple series</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="chart-cookbook.html"><a href="chart-cookbook.html#scatter-plots"><i class="fa fa-check"></i><b>13.4</b> Scatter plots</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="chart-cookbook.html"><a href="chart-cookbook.html#simple-scatter-plot"><i class="fa fa-check"></i><b>13.4.1</b> Simple scatter plot</a></li>
<li class="chapter" data-level="13.4.2" data-path="chart-cookbook.html"><a href="chart-cookbook.html#scatter-plot-with-reshaped-data"><i class="fa fa-check"></i><b>13.4.2</b> Scatter plot with reshaped data</a></li>
<li class="chapter" data-level="13.4.3" data-path="chart-cookbook.html"><a href="chart-cookbook.html#layered-scatter-plot"><i class="fa fa-check"></i><b>13.4.3</b> Layered scatter plot</a></li>
<li class="chapter" data-level="13.4.4" data-path="chart-cookbook.html"><a href="chart-cookbook.html#scatter-plots-with-trendlines"><i class="fa fa-check"></i><b>13.4.4</b> Scatter plots with trendlines</a></li>
<li class="chapter" data-level="13.4.5" data-path="chart-cookbook.html"><a href="chart-cookbook.html#facetted-scatter-plots"><i class="fa fa-check"></i><b>13.4.5</b> Facetted scatter plots</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="chart-cookbook.html"><a href="chart-cookbook.html#distributions"><i class="fa fa-check"></i><b>13.5</b> Distributions</a></li>
<li class="chapter" data-level="13.6" data-path="chart-cookbook.html"><a href="chart-cookbook.html#maps"><i class="fa fa-check"></i><b>13.6</b> Maps</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="chart-cookbook.html"><a href="chart-cookbook.html#sf-objects"><i class="fa fa-check"></i><b>13.6.1</b> <code>sf</code> objects</a></li>
<li class="chapter" data-level="13.6.2" data-path="chart-cookbook.html"><a href="chart-cookbook.html#using-absmapsdata"><i class="fa fa-check"></i><b>13.6.2</b> Using <code>absmapsdata</code></a></li>
<li class="chapter" data-level="13.6.3" data-path="chart-cookbook.html"><a href="chart-cookbook.html#making-choropleth-maps"><i class="fa fa-check"></i><b>13.6.3</b> Making choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="chart-cookbook.html"><a href="chart-cookbook.html#creating-simple-interactive-graphs-with-plotly"><i class="fa fa-check"></i><b>13.7</b> Creating simple interactive graphs with <code>plotly</code></a></li>
</ul></li>
<li class="part"><span><b>IV Advanced topics</b></span></li>
<li class="chapter" data-level="14" data-path="functional-programming-making-and-using-your-own-functions.html"><a href="functional-programming-making-and-using-your-own-functions.html"><i class="fa fa-check"></i><b>14</b> Functional programming: making and using your own functions</a>
<ul>
<li class="chapter" data-level="14.1" data-path="functional-programming-making-and-using-your-own-functions.html"><a href="functional-programming-making-and-using-your-own-functions.html#set-up-2"><i class="fa fa-check"></i><b>14.1</b> Set up</a></li>
<li class="chapter" data-level="14.2" data-path="functional-programming-making-and-using-your-own-functions.html"><a href="functional-programming-making-and-using-your-own-functions.html#defining-simple-functions"><i class="fa fa-check"></i><b>14.2</b> Defining simple functions</a></li>
<li class="chapter" data-level="14.3" data-path="functional-programming-making-and-using-your-own-functions.html"><a href="functional-programming-making-and-using-your-own-functions.html#functions-conditionals"><i class="fa fa-check"></i><b>14.3</b> Using conditional statements and categorical arguments</a></li>
<li class="chapter" data-level="14.4" data-path="functional-programming-making-and-using-your-own-functions.html"><a href="functional-programming-making-and-using-your-own-functions.html#functions-returned"><i class="fa fa-check"></i><b>14.4</b> What is ‘returned’ from a function?</a></li>
<li class="chapter" data-level="14.5" data-path="functional-programming-making-and-using-your-own-functions.html"><a href="functional-programming-making-and-using-your-own-functions.html#using-functions-on-datasets-within-mutate"><i class="fa fa-check"></i><b>14.5</b> Using functions on datasets within <code>mutate()</code></a></li>
<li class="chapter" data-level="14.6" data-path="functional-programming-making-and-using-your-own-functions.html"><a href="functional-programming-making-and-using-your-own-functions.html#using-the-purrr-family-of-functions"><i class="fa fa-check"></i><b>14.6</b> Using the <code>purrr</code> family of functions</a></li>
<li class="chapter" data-level="14.7" data-path="functional-programming-making-and-using-your-own-functions.html"><a href="functional-programming-making-and-using-your-own-functions.html#using-functions-for-visualisations"><i class="fa fa-check"></i><b>14.7</b> Using functions for visualisations</a></li>
<li class="chapter" data-level="14.8" data-path="functional-programming-making-and-using-your-own-functions.html"><a href="functional-programming-making-and-using-your-own-functions.html#sharing-your-useful-functions-with-grattan-and-the-world"><i class="fa fa-check"></i><b>14.8</b> Sharing your useful functions with Grattan and the world</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="version-control.html"><a href="version-control.html"><i class="fa fa-check"></i><b>15</b> Version control</a>
<ul>
<li class="chapter" data-level="15.1" data-path="version-control.html"><a href="version-control.html#version-control-is-important-and-intimidating"><i class="fa fa-check"></i><b>15.1</b> Version control is important and intimidating</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="version-control.html"><a href="version-control.html#step-back-in-time"><i class="fa fa-check"></i><b>15.1.1</b> Step back in time</a></li>
<li class="chapter" data-level="15.1.2" data-path="version-control.html"><a href="version-control.html#get-outta-my-way"><i class="fa fa-check"></i><b>15.1.2</b> Get outta my way</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="version-control.html"><a href="version-control.html#github"><i class="fa fa-check"></i><b>15.2</b> Github</a></li>
<li class="chapter" data-level="15.3" data-path="version-control.html"><a href="version-control.html#git"><i class="fa fa-check"></i><b>15.3</b> Git</a></li>
<li class="chapter" data-level="15.4" data-path="version-control.html"><a href="version-control.html#using-git"><i class="fa fa-check"></i><b>15.4</b> Using Git</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="adding-to-this-book.html"><a href="adding-to-this-book.html"><i class="fa fa-check"></i><b>16</b> Adding to this book</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Using R at Grattan Institute</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="different-data-types" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Different data types</h1>
<p>Data comes in many different forms. This chapter explores some of these forms and provides some tools to deal with them.</p>
<p>It’s useful to make a distinction between data <strong>structures</strong> and data <strong>types</strong>. This is a simplification but is all we need to think about for now.</p>
<p><strong>Data structures</strong> are the objects that hold your data. A <code>vector</code> stores elements in one dimension. A <code>data.frame</code> (or <code>tibble</code><a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a>) combines vectors of the same length into two dimensions with rows and columns. A <code>list</code> can store data in any way you like.</p>
<p>For our work at Grattan, tidy data within <code>tibbles</code> – where each row is an observation, and each column is a variable – is usually preferred.</p>
<p>By picking a common structure for our data, we are able to transform, plot and analyse it using a common set of functions. We don’t need to move from one method to another depending our what our data looks like.</p>
<p>Each <code>tibble</code> is a collection of <code>vectors</code> of the same length. And each <code>vector</code> must have a single data <strong>type</strong>.</p>
<p>The key data types we use are:</p>
<ul>
<li>Numerics (numbers) with the sub-types of doubles and integers.</li>
<li>Characters, also known as strings, to deal with text variables.</li>
<li>Factors, a stricter type for characters to use with categorical variables.</li>
<li>Dates, which are notoriously hard to deal with in statistical software.</li>
</ul>
<p>The following sections will walk you through these data types and how to best handle them. We’ll first load the required packages and read in some data.</p>
<div id="set-up-and-packages" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Set-up and packages</h2>
<p>This chapter uses packages that are designed to help with different data types.</p>
<p>The <code>stringr</code> package helps deal with characters. The <code>forcats</code> package helps with factors. The <code>lubridate</code> package helps – a lot! – with dates.</p>
<p>These three packages are <em>installed</em> part of the <code>tidyverse</code> and are installed with it. <code>stringr</code> and <code>forcats</code> are <em>loaded</em> with <code>library(tidyverse)</code>, but <code>lubridate</code> isn’t and needs to be loaded separately.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="different-data-types.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb50-2"><a href="different-data-types.html#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code></pre></div>
<p>For most charts in this chapter, we’ll use the <code>sa3_income</code> data summarised below.<a href="#fn13" class="footnote-ref" id="fnref13"><sup>13</sup></a> It is a tidy dataset containing the median income and number of workers by SA3, occupation and gender between 2010 and 2015:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="different-data-types.html#cb51-1" aria-hidden="true" tabindex="-1"></a>sa3_income <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/sa3_income.csv&quot;</span>)</span>
<span id="cb51-2"><a href="different-data-types.html#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="different-data-types.html#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(sa3_income)</span></code></pre></div>
<pre><code>## Rows: 47,899
## Columns: 16
## $ sa3                   &lt;dbl&gt; 10102, 10102, 10102, 10102, 10102, 10102, 10102,…
## $ sa3_name              &lt;chr&gt; &quot;Queanbeyan&quot;, &quot;Queanbeyan&quot;, &quot;Queanbeyan&quot;, &quot;Quean…
## $ sa3_sqkm              &lt;dbl&gt; 6511.191, 6511.191, 6511.191, 6511.191, 6511.191…
## $ sa3_income_percentile &lt;dbl&gt; 80, 76, 78, 76, 74, 79, 80, 76, 78, 76, 74, 79, …
## $ sa4_name              &lt;chr&gt; &quot;Capital Region&quot;, &quot;Capital Region&quot;, &quot;Capital Reg…
## $ gcc_name              &lt;chr&gt; &quot;Rest of NSW&quot;, &quot;Rest of NSW&quot;, &quot;Rest of NSW&quot;, &quot;Re…
## $ state                 &lt;chr&gt; &quot;NSW&quot;, &quot;NSW&quot;, &quot;NSW&quot;, &quot;NSW&quot;, &quot;NSW&quot;, &quot;NSW&quot;, &quot;NSW&quot;,…
## $ occupation            &lt;chr&gt; &quot;Clerical and Administrative Workers&quot;, &quot;Clerical…
## $ occ_short             &lt;chr&gt; &quot;Admin&quot;, &quot;Admin&quot;, &quot;Admin&quot;, &quot;Admin&quot;, &quot;Admin&quot;, &quot;Ad…
## $ prof                  &lt;chr&gt; &quot;Non-professional&quot;, &quot;Non-professional&quot;, &quot;Non-pro…
## $ gender                &lt;chr&gt; &quot;Women&quot;, &quot;Women&quot;, &quot;Women&quot;, &quot;Women&quot;, &quot;Women&quot;, &quot;Wo…
## $ year                  &lt;dbl&gt; 2011, 2012, 2013, 2014, 2015, 2016, 2011, 2012, …
## $ median_income         &lt;dbl&gt; 52127, 54894, 57868, 59025, 59041, 62741, 66900,…
## $ average_income        &lt;dbl&gt; 51306, 53807, 56405, 57742, 58286, 61591, 66869,…
## $ total_income          &lt;dbl&gt; 235853682, 253323356, 266908460, 264054166, 2382…
## $ workers               &lt;dbl&gt; 4597, 4708, 4732, 4573, 4087, 4448, 1459, 1467, …</code></pre>
</div>
<div id="why-data-types-matter" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Why data types matter</h2>
<p>Data ‘types’ define how your data is stored and what you can (or cannot) do with it.</p>
<p>You can do maths on numbers:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="different-data-types.html#cb53-1" aria-hidden="true" tabindex="-1"></a>num1 <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb53-2"><a href="different-data-types.html#cb53-2" aria-hidden="true" tabindex="-1"></a>num2 <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb53-3"><a href="different-data-types.html#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="different-data-types.html#cb53-4" aria-hidden="true" tabindex="-1"></a>num1 <span class="sc">+</span> num2</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="different-data-types.html#cb55-1" aria-hidden="true" tabindex="-1"></a>num1 <span class="sc">/</span> num2</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>And you can perform string operations on characters:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="different-data-types.html#cb57-1" aria-hidden="true" tabindex="-1"></a>char1 <span class="ot">&lt;-</span> <span class="st">&quot;Hello&quot;</span></span>
<span id="cb57-2"><a href="different-data-types.html#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="different-data-types.html#cb57-3" aria-hidden="true" tabindex="-1"></a><span class="fu">substring</span>(char1, <span class="dv">4</span>, <span class="dv">6</span>)</span></code></pre></div>
<pre><code>## [1] &quot;lo&quot;</code></pre>
<p>But you can’t perform maths on characters, because that doesn’t really make sense:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="different-data-types.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Hello&quot;</span> <span class="sc">*</span> <span class="dv">2</span> </span></code></pre></div>
<pre><code>## Error in &quot;Hello&quot; * 2: non-numeric argument to binary operator</code></pre>
<p>Even when you kind of think it should:</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="different-data-types.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;100&quot;</span> <span class="sc">*</span> <span class="dv">2</span></span></code></pre></div>
<pre><code>## Error in &quot;100&quot; * 2: non-numeric argument to binary operator</code></pre>
<p>Above, R is trying to multiply the <em>character</em> <code>"100"</code> by the <em>number</em> <code>2</code>. Which – because of the types of these data – makes as much sense as <code>"Hello" $\times$ 2</code>.</p>
<p>Defining and checking and being aware of the ‘type’ of your data is a boring and tedious task common to all statistical languages/software.
It’s just something you need to do.</p>
<p>But knowing this information will save you countless errors, like the ones above, in the future.
We’ll get through it briefly, focussing on the things you need to know and on how to solve the problems you are likely to encounter.</p>
</div>
<div id="checking-and-changing-data-types" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> Checking and changing data types</h2>
<p>You can use the <code>str</code> function to check the type of an object:</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="different-data-types.html#cb63-1" aria-hidden="true" tabindex="-1"></a>ob1 <span class="ot">&lt;-</span> <span class="st">&quot;Hello&quot;</span></span>
<span id="cb63-2"><a href="different-data-types.html#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ob1)</span></code></pre></div>
<pre><code>##  chr &quot;Hello&quot;</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="different-data-types.html#cb65-1" aria-hidden="true" tabindex="-1"></a>ob2 <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb65-2"><a href="different-data-types.html#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ob2)</span></code></pre></div>
<pre><code>##  num 10</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="different-data-types.html#cb67-1" aria-hidden="true" tabindex="-1"></a>ob3 <span class="ot">&lt;-</span> <span class="st">&quot;10&quot;</span></span>
<span id="cb67-2"><a href="different-data-types.html#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ob3)</span></code></pre></div>
<pre><code>##  chr &quot;10&quot;</code></pre>
<p>You can also change or assert the data type explicitly:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="different-data-types.html#cb69-1" aria-hidden="true" tabindex="-1"></a>ob4 <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="st">&quot;10&quot;</span>)</span>
<span id="cb69-2"><a href="different-data-types.html#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ob4)</span></code></pre></div>
<pre><code>##  num 10</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="different-data-types.html#cb71-1" aria-hidden="true" tabindex="-1"></a>ob5 <span class="ot">&lt;-</span> <span class="fu">as.character</span>(<span class="dv">10</span>)</span>
<span id="cb71-2"><a href="different-data-types.html#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(ob5)</span></code></pre></div>
<pre><code>##  chr &quot;10&quot;</code></pre>
<p>But be cautious: forcing data from one type to another can lead to <code>NA</code> values when the conversion isn’t possible. For example:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="different-data-types.html#cb73-1" aria-hidden="true" tabindex="-1"></a>ob6 <span class="ot">&lt;-</span> <span class="st">&quot;Hello&quot;</span></span>
<span id="cb73-2"><a href="different-data-types.html#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(ob6)</span></code></pre></div>
<pre><code>## Warning: NAs introduced by coercion</code></pre>
<pre><code>## [1] NA</code></pre>
<p>The characters “Hello” can’t be converted to a number, so R replaces it with <code>NA</code> and throws you a warning message.</p>
<p>The next section extends these concepts from single elements to whole variables in your data.</p>
</div>
<div id="checking-and-changing-data-types-in-vectors-and-tibbles" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> Checking and changing data types in vectors and <code>tibbles</code></h2>
<p>In a <code>tibble</code>, each variable is a vector that can have <em>one-and-only-one</em> data type.</p>
<p>A variable can be a numeric, or character, or factor, or date, or something else entirely.
But it can only be of one type.<a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a>
This means that every observation in a variable must be of the same type.</p>
<p>Below is an example <code>tibble</code> to explore how we can check, change and use different data types.
This <code>tibble</code> is constructed by defining four vectors:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="different-data-types.html#cb76-1" aria-hidden="true" tabindex="-1"></a>eg <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb76-2"><a href="different-data-types.html#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Kate&quot;</span>, <span class="st">&quot;Jonathan&quot;</span>, <span class="st">&quot;Emily&quot;</span>, <span class="st">&quot;James&quot;</span>),</span>
<span id="cb76-3"><a href="different-data-types.html#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">numb1 =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>),</span>
<span id="cb76-4"><a href="different-data-types.html#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">numb2 =</span> <span class="fu">c</span>(<span class="st">&quot;-10&quot;</span>, <span class="st">&quot;10&quot;</span>, <span class="st">&quot;-20&quot;</span>, <span class="st">&quot;20&quot;</span>),</span>
<span id="cb76-5"><a href="different-data-types.html#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">numb3 =</span> <span class="fu">c</span>(<span class="dv">100</span>, <span class="dv">1000</span>, <span class="dv">10000</span>, <span class="st">&quot;None&quot;</span>),</span>
<span id="cb76-6"><a href="different-data-types.html#cb76-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">messy =</span> <span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;  1  &quot;</span>, <span class="st">&quot;0. 1&quot;</span>, <span class="st">&quot;1%&quot;</span>)</span>
<span id="cb76-7"><a href="different-data-types.html#cb76-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb76-8"><a href="different-data-types.html#cb76-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-9"><a href="different-data-types.html#cb76-9" aria-hidden="true" tabindex="-1"></a>eg</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   name     numb1 numb2 numb3 messy  
##   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  
## 1 Kate         1 -10   100   &quot;1&quot;    
## 2 Jonathan     2 10    1000  &quot;  1  &quot;
## 3 Emily        3 -20   10000 &quot;0. 1&quot; 
## 4 James        4 20    None  &quot;1%&quot;</code></pre>
<p>The first two variables are easy.
<code>name</code> contains only strings and so is set to a character variable.
<code>numb1</code> contains numbers is set to a double.</p>
<p>The <code>numb2</code> and <code>messy</code> variables are also all strings, so R will store them as character variables (even if a human <em>may</em> be able to decipher some of the strings as numbers),</p>
<p><code>numb3</code> contains <strong>both</strong> numbers and strings. When this is the case, R converts everything to a character to preserve all the information.</p>
<p>We can check the types of the variables in the <code>eg</code> dataset with the <code>str</code> function:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="different-data-types.html#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(eg)</span></code></pre></div>
<pre><code>## tibble [4 × 5] (S3: tbl_df/tbl/data.frame)
##  $ name : chr [1:4] &quot;Kate&quot; &quot;Jonathan&quot; &quot;Emily&quot; &quot;James&quot;
##  $ numb1: num [1:4] 1 2 3 4
##  $ numb2: chr [1:4] &quot;-10&quot; &quot;10&quot; &quot;-20&quot; &quot;20&quot;
##  $ numb3: chr [1:4] &quot;100&quot; &quot;1000&quot; &quot;10000&quot; &quot;None&quot;
##  $ messy: chr [1:4] &quot;1&quot; &quot;  1  &quot; &quot;0. 1&quot; &quot;1%&quot;</code></pre>
<p>This tells us that our data <strong>structure</strong> is <code>tbl_df</code>, <code>tbl</code> and <code>data.frame</code> (i.e. a <code>tibble</code>), and the data <strong>types</strong> of our variables are: character, numeric, character, character and character.</p>
<p>The first two variables are classified as we want them. <code>names</code> should be stored as characters; <code>numb1</code> should be stored as doubles.</p>
<p>But we can see that <code>numb2</code> is a set of numbers that have been stored as characters. And this means we can’t use their wonderful numeric powers:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="different-data-types.html#cb80-1" aria-hidden="true" tabindex="-1"></a>eg <span class="sc">%&gt;%</span> </span>
<span id="cb80-2"><a href="different-data-types.html#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">numb2_div10 =</span> numb2 <span class="sc">/</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## Error: Problem with `mutate()` column `numb2_div10`.
## ℹ `numb2_div10 = numb2/10`.
## ✖ non-numeric argument to binary operator</code></pre>
<p>If we want to change that, we redefine the <code>numb2</code> variable using the <code>mutate</code> function (from the previous chapter) and the <code>as.numeric</code> function described in the previous section:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="different-data-types.html#cb82-1" aria-hidden="true" tabindex="-1"></a>eg <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="different-data-types.html#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">numb2 =</span> <span class="fu">as.numeric</span>(numb2))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 5
##   name     numb1 numb2 numb3 messy  
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  
## 1 Kate         1   -10 100   &quot;1&quot;    
## 2 Jonathan     2    10 1000  &quot;  1  &quot;
## 3 Emily        3   -20 10000 &quot;0. 1&quot; 
## 4 James        4    20 None  &quot;1%&quot;</code></pre>
<p>The <code>tibble</code> output shows that <code>numb2</code> is now a double. Yay! And this means we can do maths on it:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="different-data-types.html#cb84-1" aria-hidden="true" tabindex="-1"></a>eg <span class="sc">%&gt;%</span> </span>
<span id="cb84-2"><a href="different-data-types.html#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">numb2 =</span> <span class="fu">as.numeric</span>(numb2),</span>
<span id="cb84-3"><a href="different-data-types.html#cb84-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">numb2_div10 =</span> numb2 <span class="sc">/</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 6
##   name     numb1 numb2 numb3 messy   numb2_div10
##   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;
## 1 Kate         1   -10 100   &quot;1&quot;              -1
## 2 Jonathan     2    10 1000  &quot;  1  &quot;           1
## 3 Emily        3   -20 10000 &quot;0. 1&quot;           -2
## 4 James        4    20 None  &quot;1%&quot;              2</code></pre>
<p>What about <code>numb3</code>? It has a numbers and a string that are stored as a character variable. If we use the same approach as above:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="different-data-types.html#cb86-1" aria-hidden="true" tabindex="-1"></a>eg <span class="sc">%&gt;%</span> </span>
<span id="cb86-2"><a href="different-data-types.html#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">numb3 =</span> <span class="fu">as.numeric</span>(numb3))</span></code></pre></div>
<pre><code>## Warning in mask$eval_all_mutate(quo): NAs introduced by coercion</code></pre>
<pre><code>## # A tibble: 4 × 5
##   name     numb1 numb2 numb3 messy  
##   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;  
## 1 Kate         1 -10     100 &quot;1&quot;    
## 2 Jonathan     2 10     1000 &quot;  1  &quot;
## 3 Emily        3 -20   10000 &quot;0. 1&quot; 
## 4 James        4 20       NA &quot;1%&quot;</code></pre>
<p>We do convert the <code>numb3</code> variable to a numeric, which is what we wanted. But there are casualties. Because <code>"None"</code> cannot be neatly converted to a number, the string in the last observation is removed and replaced with <code>NA</code> (and we get a warning that there were <code>NAs introduced by coercion</code>).</p>
<p>Converting strings to numerics made harder by data that is stored messily. The <code>messy</code> variable is made up of numbers that humans could decipher. The <code>as.numeric</code> function tries its best:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="different-data-types.html#cb89-1" aria-hidden="true" tabindex="-1"></a>eg <span class="sc">%&gt;%</span> </span>
<span id="cb89-2"><a href="different-data-types.html#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">messy =</span> <span class="fu">as.numeric</span>(messy))</span></code></pre></div>
<pre><code>## Warning in mask$eval_all_mutate(quo): NAs introduced by coercion</code></pre>
<pre><code>## # A tibble: 4 × 5
##   name     numb1 numb2 numb3 messy
##   &lt;chr&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;
## 1 Kate         1 -10   100       1
## 2 Jonathan     2 10    1000      1
## 3 Emily        3 -20   10000    NA
## 4 James        4 20    None     NA</code></pre>
<p>We again convert the variable to a numeric. The <code>as.numeric</code> function nails <code>"1"</code> and removes the leading and trailing white-spaces of <code>"  1  "</code>. But it doesn’t understand the space in the middle of <code>"0. 1"</code>, and doesn’t convert the percentage in <code>"1%"</code>. Luckily, we have the <code>warning</code> message that tells us this has happened.</p>
<p>Complications like these mean we have to watch out for how our data is read.</p>
</div>
<div id="asserting-data-types-when-importing-data" class="section level2" number="9.5">
<h2><span class="header-section-number">9.5</span> Asserting data types when importing data</h2>
</div>
<div id="changing-the-data-types-of-lots-of-variables" class="section level2" number="9.6">
<h2><span class="header-section-number">9.6</span> Changing the data types of lots of variables</h2>
</div>
<div id="using-character-vectors" class="section level2" number="9.7">
<h2><span class="header-section-number">9.7</span> Using character vectors</h2>
<p>Characters contain information between quotes, like a letter or word or sentence. They can contain (almost) anything. They have no ‘rules’, unlike numerics, factors or dates. This freedom can be good or bad depending on your situation: sometimes restrictions are good!</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="different-data-types.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;hello&quot;</span></span></code></pre></div>
<pre><code>## [1] &quot;hello&quot;</code></pre>
<p><img src="atlas/rstudio_newproject.png" width="66%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="different-data-types.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">typeof</span>()</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="different-data-types.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">class</span>()</span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="different-data-types.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;hello&quot;</span>, <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">str</span>()</span></code></pre></div>
<pre><code>##  chr [1:2] &quot;hello&quot; &quot;1&quot;</code></pre>
</div>
<div id="using-dates-with-lubridate" class="section level2" number="9.8">
<h2><span class="header-section-number">9.8</span> Using dates with <code>lubridate::</code></h2>
<p>Dates are hard, and dealing with dates in statistical software like R, Excel</p>
<p>The <code>lubridate::</code> package</p>
</div>
<div id="strings-with-stringr" class="section level2" number="9.9">
<h2><span class="header-section-number">9.9</span> Strings with <code>stringr::</code></h2>
<ul>
<li>Replacing values</li>
<li>Matching values</li>
<li>Separating columns</li>
</ul>
</div>
<div id="factors-with-forcats" class="section level2" number="9.10">
<h2><span class="header-section-number">9.10</span> Factors with <code>forcats::</code></h2>
<ul>
<li>Dangers with factors</li>
</ul>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="12">
<li id="fn12"><p>A <code>tibble</code> is the <code>tidyverse</code> version of a standard R <code>data.frame</code>. They are basically the same; a <code>tibble</code> just has some more sensible default behaviours. If you want to learn more about this, see <a href="https://adv-r.hadley.nz/vectors-chap.html#tibble">Section 3.6 in Advanced R</a>. <a href="different-data-types.html#fnref12" class="footnote-back">↩︎</a></p></li>
<li id="fn13"><p>From <a href="https://www.abs.gov.au/AUSSTATS/abs@.nsf/DetailsPage/6524.0.55.0022011-2016?OpenDocument">ABS Employee income by occupation and gender, 2010-11 to 2015-16</a><a href="different-data-types.html#fnref13" class="footnote-back">↩︎</a></p></li>
<li id="fn14"><p>There are ways around this using ‘list’ variables, but this is rarely useful or necessary.<a href="different-data-types.html#fnref14" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="reading-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-transformation-with-dplyr.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["r-at-grattan.pdf"],
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
